!function(a){a(function(){a.support.transition=function(){var b=function(){var d=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},f;for(f in c){if(d.style[f]!==undefined){return c[f]}}}();return b&&{end:b}}()})}(window.jQuery),!function(c){var a='[data-dismiss="alert"]',d=function(e){c(e).on("click",a,this.close)};d.prototype.close=function(f){function g(){e.trigger("closed").remove()}var j=c(this),h=j.attr("data-target"),e;h||(h=j.attr("href"),h=h&&h.replace(/.*(?=#[^\s]*$)/,"")),e=c(h),f&&f.preventDefault(),e.length||(e=j.hasClass("alert")?j:j.parent()),e.trigger(f=c.Event("close"));if(f.isDefaultPrevented()){return}e.removeClass("in"),c.support.transition&&e.hasClass("fade")?e.on(c.support.transition.end,g):g()};var b=c.fn.alert;c.fn.alert=function(e){return this.each(function(){var g=c(this),f=g.data("alert");f||g.data("alert",f=new d(this)),typeof e=="string"&&f[e].call(g)})},c.fn.alert.Constructor=d,c.fn.alert.noConflict=function(){return c.fn.alert=b,this},c(document).on("click.alert.data-api",a,d.prototype.close)}(window.jQuery),!function(b){var a=function(d,e){this.$element=b(d),this.options=b.extend({},b.fn.button.defaults,e)};a.prototype.setState=function(h){var f="disabled",j=this.$element,g=j.data(),d=j.is("input")?"val":"html";h+="Text",g.resetText||j.data("resetText",j[d]()),j[d](g[h]||this.options[h]),setTimeout(function(){h=="loadingText"?j.addClass(f).attr(f,f):j.removeClass(f).removeAttr(f)},0)},a.prototype.toggle=function(){var d=this.$element.closest('[data-toggle="buttons-radio"]');d&&d.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=b.fn.button;b.fn.button=function(d){return this.each(function(){var g=b(this),e=g.data("button"),f=typeof d=="object"&&d;e||g.data("button",e=new a(this,f)),d=="toggle"?e.toggle():d&&e.setState(d)})},b.fn.button.defaults={loadingText:"loading..."},b.fn.button.Constructor=a,b.fn.button.noConflict=function(){return b.fn.button=c,this},b(document).on("click.button.data-api","[data-toggle^=button]",function(d){var e=b(d.target);e.hasClass("btn")||(e=e.closest(".btn")),e.button("toggle")})}(window.jQuery),!function(b){var a=function(d,e){this.$element=b(d),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.options.pause=="hover"&&this.$element.on("mouseenter",b.proxy(this.pause,this)).on("mouseleave",b.proxy(this.cycle,this))};a.prototype={cycle:function(d){return d||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(b.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(d){var f=this.getActiveIndex(),e=this;if(d>this.$items.length-1||d<0){return}return this.sliding?this.$element.one("slid",function(){e.to(d)}):f==d?this.pause().cycle():this.slide(d>f?"next":"prev",b(this.$items[d]))},pause:function(d){return d||(this.paused=!0),this.$element.find(".next, .prev").length&&b.support.transition.end&&(this.$element.trigger(b.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding){return}return this.slide("next")},prev:function(){if(this.sliding){return}return this.slide("prev")},slide:function(m,g){var d=this.$element.find(".item.active"),h=g||d[m](),p=this.interval,e=m=="next"?"left":"right",l=m=="next"?"first":"last",k=this,j;this.sliding=!0,p&&this.pause(),h=h.length?h:this.$element.find(".item")[l](),j=b.Event("slide",{relatedTarget:h[0],direction:e});if(h.hasClass("active")){return}this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var f=b(k.$indicators.children()[k.getActiveIndex()]);f&&f.addClass("active")}));if(b.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(j);if(j.isDefaultPrevented()){return}h.addClass(m),h[0].offsetWidth,d.addClass(e),h.addClass(e),this.$element.one(b.support.transition.end,function(){h.removeClass([m,e].join(" ")).addClass("active"),d.removeClass(["active",e].join(" ")),k.sliding=!1,setTimeout(function(){k.$element.trigger("slid")},0)})}else{this.$element.trigger(j);if(j.isDefaultPrevented()){return}d.removeClass("active"),h.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return p&&this.cycle(),this}};var c=b.fn.carousel;b.fn.carousel=function(d){return this.each(function(){var g=b(this),e=g.data("carousel"),f=b.extend({},b.fn.carousel.defaults,typeof d=="object"&&d),h=typeof d=="string"?d:f.slide;e||g.data("carousel",e=new a(this,f)),typeof d=="number"?e.to(d):h?e[h]():f.interval&&e.pause().cycle()})},b.fn.carousel.defaults={interval:5000,pause:"hover"},b.fn.carousel.Constructor=a,b.fn.carousel.noConflict=function(){return b.fn.carousel=c,this},b(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var j=b(this),g,d=b(j.attr("data-target")||(g=j.attr("href"))&&g.replace(/.*(?=#[^\s]+$)/,"")),f=b.extend({},d.data(),j.data()),h;d.carousel(f),(h=j.attr("data-slide-to"))&&d.data("carousel").pause().to(h).cycle(),e.preventDefault()})}(window.jQuery),!function(b){var a=function(d,e){this.$element=b(d),this.options=b.extend({},b.fn.collapse.defaults,e),this.options.parent&&(this.$parent=b(this.options.parent)),this.options.toggle&&this.toggle()};a.prototype={constructor:a,dimension:function(){var d=this.$element.hasClass("width");return d?"width":"height"},show:function(){var e,g,f,d;if(this.transitioning||this.$element.hasClass("in")){return}e=this.dimension(),g=b.camelCase(["scroll",e].join("-")),f=this.$parent&&this.$parent.find("> .accordion-group > .in");if(f&&f.length){d=f.data("collapse");if(d&&d.transitioning){return}f.collapse("hide"),d||f.data("collapse",null)}this.$element[e](0),this.transition("addClass",b.Event("show"),"shown"),b.support.transition&&this.$element[e](this.$element[0][g])},hide:function(){var d;if(this.transitioning||!this.$element.hasClass("in")){return}d=this.dimension(),this.reset(this.$element[d]()),this.transition("removeClass",b.Event("hide"),"hidden"),this.$element[d](0)},reset:function(f){var d=this.dimension();return this.$element.removeClass("collapse")[d](f||"auto")[0].offsetWidth,this.$element[f!==null?"addClass":"removeClass"]("collapse"),this},transition:function(e,h,g){var d=this,f=function(){h.type=="show"&&d.reset(),d.transitioning=0,d.$element.trigger(g)};this.$element.trigger(h);if(h.isDefaultPrevented()){return}this.transitioning=1,this.$element[e]("in"),b.support.transition&&this.$element.hasClass("collapse")?this.$element.one(b.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=b.fn.collapse;b.fn.collapse=function(d){return this.each(function(){var g=b(this),e=g.data("collapse"),f=b.extend({},b.fn.collapse.defaults,g.data(),typeof d=="object"&&d);e||g.data("collapse",e=new a(this,f)),typeof d=="string"&&e[d]()})},b.fn.collapse.defaults={toggle:!0},b.fn.collapse.Constructor=a,b.fn.collapse.noConflict=function(){return b.fn.collapse=c,this},b(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var h=b(this),g,d=h.attr("data-target")||e.preventDefault()||(g=h.attr("href"))&&g.replace(/.*(?=#[^\s]+$)/,""),f=b(d).data("collapse")?"toggle":h.data();h[b(d).hasClass("in")?"addClass":"removeClass"]("collapsed"),b(d).collapse(f)})}(window.jQuery),!function(f){function d(){f(a).each(function(){b(f(this)).removeClass("open")})}function b(e){var i=e.attr("data-target"),h;i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),h=i&&f(i);if(!h||!h.length){h=e.parent()}return h}var a="[data-toggle=dropdown]",g=function(e){var h=f(e).on("click.dropdown.data-api",this.toggle);f("html").on("click.dropdown.data-api",function(){h.parent().removeClass("open")})};g.prototype={constructor:g,toggle:function(e){var j=f(this),h,i;if(j.is(".disabled, :disabled")){return}return h=b(j),i=h.hasClass("open"),d(),i||h.toggleClass("open"),j.focus(),!1},keydown:function(m){var j,i,l,h,e,k;if(!/(38|40|27)/.test(m.keyCode)){return}j=f(this),m.preventDefault(),m.stopPropagation();if(j.is(".disabled, :disabled")){return}h=b(j),e=h.hasClass("open");if(!e||e&&m.keyCode==27){return m.which==27&&h.find(a).focus(),j.click()}i=f("[role=menu] li:not(.divider):visible a",h);if(!i.length){return}k=i.index(i.filter(":focus")),m.keyCode==38&&k>0&&k--,m.keyCode==40&&k<i.length-1&&k++,~k||(k=0),i.eq(k).focus()}};var c=f.fn.dropdown;f.fn.dropdown=function(e){return this.each(function(){var j=f(this),h=j.data("dropdown");h||j.data("dropdown",h=new g(this)),typeof e=="string"&&h[e].call(j)})},f.fn.dropdown.Constructor=g,f.fn.dropdown.noConflict=function(){return f.fn.dropdown=c,this},f(document).on("click.dropdown.data-api",d).on("click.dropdown.data-api",".dropdown form",function(h){h.stopPropagation()}).on(".dropdown-menu",function(h){h.stopPropagation()}).on("click.dropdown.data-api",a,g.prototype.toggle).on("keydown.dropdown.data-api",a+", [role=menu]",g.prototype.keydown)}(window.jQuery),!function(b){var a=function(d,e){this.options=e,this.$element=b(d).delegate('[data-dismiss="modal"]',"click.dismiss.modal",b.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};a.prototype={constructor:a,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var d=this,e=b.Event("show");this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented()){return}this.isShown=!0,this.escape(),this.backdrop(function(){var f=b.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(document.body),d.$element.show(),f&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus(),f?d.$element.one(b.support.transition.end,function(){d.$element.focus().trigger("shown")}):d.$element.focus().trigger("shown")})},hide:function(d){d&&d.preventDefault();var e=this;d=b.Event("hide"),this.$element.trigger(d);if(!this.isShown||d.isDefaultPrevented()){return}this.isShown=!1,this.escape(),b(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),b.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var d=this;b(document).on("focusin.modal",function(f){d.$element[0]!==f.target&&!d.$element.has(f.target).length&&d.$element.focus()})},escape:function(){var d=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){e.which==27&&d.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var d=this,e=setTimeout(function(){d.$element.off(b.support.transition.end),d.hideModal()},500);this.$element.one(b.support.transition.end,function(){clearTimeout(e),d.hideModal()})},hideModal:function(){var d=this;this.$element.hide(),this.backdrop(function(){d.removeBackdrop(),d.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var g=this,f=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=b.support.transition&&f;this.$backdrop=b('<div class="modal-backdrop '+f+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?b.proxy(this.$element[0].focus,this.$element[0]):b.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!e){return}d?this.$backdrop.one(b.support.transition.end,e):e()}else{!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),b.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(b.support.transition.end,e):e()):e&&e()}}};var c=b.fn.modal;b.fn.modal=function(d){return this.each(function(){var g=b(this),e=g.data("modal"),f=b.extend({},b.fn.modal.defaults,g.data(),typeof d=="object"&&d);e||g.data("modal",e=new a(this,f)),typeof d=="string"?e[d]():f.show&&e.show()})},b.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},b.fn.modal.Constructor=a,b.fn.modal.noConflict=function(){return b.fn.modal=c,this},b(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var h=b(this),g=h.attr("href"),d=b(h.attr("data-target")||g&&g.replace(/.*(?=#[^\s]+$)/,"")),f=d.data("modal")?"toggle":b.extend({remote:!/#/.test(g)&&g},d.data(),h.data());e.preventDefault(),d.modal(f).one("hide",function(){h.focus()})})}(window.jQuery),!function(b){var a=function(f,d){this.init("tooltip",f,d)};a.prototype={constructor:a,init:function(g,l,j){var f,h,k,e,d;this.type=g,this.$element=b(l),this.options=this.getOptions(j),this.enabled=!0,k=this.options.trigger.split(" ");for(d=k.length;d--;){e=k[d],e=="click"?this.$element.on("click."+this.type,this.options.selector,b.proxy(this.toggle,this)):e!="manual"&&(f=e=="hover"?"mouseenter":"focus",h=e=="hover"?"mouseleave":"blur",this.$element.on(f+"."+this.type,this.options.selector,b.proxy(this.enter,this)),this.$element.on(h+"."+this.type,this.options.selector,b.proxy(this.leave,this)))}this.options.selector?this._options=b.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(d){return d=b.extend({},b.fn[this.type].defaults,this.$element.data(),d),d.delay&&typeof d.delay=="number"&&(d.delay={show:d.delay,hide:d.delay}),d},enter:function(d){var e=b(d.currentTarget)[this.type](this._options).data(this.type);if(!e.options.delay||!e.options.delay.show){return e.show()}clearTimeout(this.timeout),e.hoverState="in",this.timeout=setTimeout(function(){e.hoverState=="in"&&e.show()},e.options.delay.show)},leave:function(d){var e=b(d.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!e.options.delay||!e.options.delay.hide){return e.hide()}e.hoverState="out",this.timeout=setTimeout(function(){e.hoverState=="out"&&e.hide()},e.options.delay.hide)},show:function(){var f,k,h,e,g,j,d=b.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(d);if(d.isDefaultPrevented()){return}f=this.tip(),this.setContent(),this.options.animation&&f.addClass("fade"),g=typeof this.options.placement=="function"?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,f.detach().css({top:0,left:0,display:"block"}),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),k=this.getPosition(),h=f[0].offsetWidth,e=f[0].offsetHeight;switch(g){case"bottom":j={top:k.top+k.height,left:k.left+k.width/2-h/2};break;case"top":j={top:k.top-e,left:k.left+k.width/2-h/2};break;case"left":j={top:k.top+k.height/2-e/2,left:k.left-h};break;case"right":j={top:k.top+k.height/2-e/2,left:k.left+k.width}}this.applyPlacement(j,g),this.$element.trigger("shown")}},applyPlacement:function(j,m){var g=this.tip(),d=g[0].offsetWidth,h=g[0].offsetHeight,p,f,l,k;g.offset(j).addClass(m).addClass("in"),p=g[0].offsetWidth,f=g[0].offsetHeight,m=="top"&&f!=h&&(j.top=j.top+h-f,k=!0),m=="bottom"||m=="top"?(l=0,j.left<0&&(l=j.left*-2,j.left=0,g.offset(j),p=g[0].offsetWidth,f=g[0].offsetHeight),this.replaceArrow(l-d+p,p,"left")):this.replaceArrow(f-h,f,"top"),k&&g.offset(j)},replaceArrow:function(f,d,g){this.arrow().css(g,f?50*(1-f/d)+"%":"")},setContent:function(){var f=this.tip(),d=this.getTitle();f.find(".tooltip-inner")[this.options.html?"html":"text"](d),f.removeClass("fade in top bottom left right")},hide:function(){function e(){var h=setTimeout(function(){g.off(b.support.transition.end).detach()},500);g.one(b.support.transition.end,function(){clearTimeout(h),g.detach()})}var d=this,g=this.tip(),f=b.Event("hide");this.$element.trigger(f);if(f.isDefaultPrevented()){return}return g.removeClass("in"),b.support.transition&&this.$tip.hasClass("fade")?e():g.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var d=this.$element;(d.attr("title")||typeof d.attr("data-original-title")!="string")&&d.attr("data-original-title",d.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var d=this.$element[0];return b.extend({},typeof d.getBoundingClientRect=="function"?d.getBoundingClientRect():{width:d.offsetWidth,height:d.offsetHeight},this.$element.offset())},getTitle:function(){var f,d=this.$element,g=this.options;return f=d.attr("data-original-title")||(typeof g.title=="function"?g.title.call(d[0]):g.title),f},tip:function(){return this.$tip=this.$tip||b(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(d){var e=d?b(d.currentTarget)[this.type](this._options).data(this.type):this;e.tip().hasClass("in")?e.hide():e.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=b.fn.tooltip;b.fn.tooltip=function(d){return this.each(function(){var g=b(this),e=g.data("tooltip"),f=typeof d=="object"&&d;e||g.data("tooltip",e=new a(this,f)),typeof d=="string"&&e[d]()})},b.fn.tooltip.Constructor=a,b.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.fn.tooltip.noConflict=function(){return b.fn.tooltip=c,this}}(window.jQuery),!function(b){var a=function(f,d){this.init("popover",f,d)};a.prototype=b.extend({},b.fn.tooltip.Constructor.prototype,{constructor:a,setContent:function(){var f=this.tip(),d=this.getTitle(),g=this.getContent();f.find(".popover-title")[this.options.html?"html":"text"](d),f.find(".popover-content")[this.options.html?"html":"text"](g),f.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var f,d=this.$element,g=this.options;return f=(typeof g.content=="function"?g.content.call(d[0]):g.content)||d.attr("data-content"),f},tip:function(){return this.$tip||(this.$tip=b(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=b.fn.popover;b.fn.popover=function(d){return this.each(function(){var g=b(this),e=g.data("popover"),f=typeof d=="object"&&d;e||g.data("popover",e=new a(this,f)),typeof d=="string"&&e[d]()})},b.fn.popover.Constructor=a,b.fn.popover.defaults=b.extend({},b.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.fn.popover.noConflict=function(){return b.fn.popover=c,this}}(window.jQuery),!function(b){function a(e,h){var g=b.proxy(this.process,this),d=b(e).is("body")?b(window):b(e),f;this.options=b.extend({},b.fn.scrollspy.defaults,h),this.$scrollElement=d.on("scroll.scroll-spy.data-api",g),this.selector=(this.options.target||(f=b(e).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=b("body"),this.refresh(),this.process()}a.prototype={constructor:a,refresh:function(){var d=this,e;this.offsets=b([]),this.targets=b([]),e=this.$body.find(this.selector).map(function(){var h=b(this),g=h.data("target")||h.attr("href"),f=/^#\w/.test(g)&&b(g);return f&&f.length&&[[f.position().top+(!b.isWindow(d.$scrollElement.get(0))&&d.$scrollElement.scrollTop()),g]]||null}).sort(function(g,f){return g[0]-f[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},process:function(){var j=this.$scrollElement.scrollTop()+this.options.offset,f=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,l=f-this.$scrollElement.height(),h=this.offsets,d=this.targets,g=this.activeTarget,k;if(j>=l){return g!=(k=d.last()[0])&&this.activate(k)}for(k=h.length;k--;){g!=d[k]&&j>=h[k]&&(!h[k+1]||j<=h[k+1])&&this.activate(d[k])}},activate:function(d){var f,e;this.activeTarget=d,b(this.selector).parent(".active").removeClass("active"),e=this.selector+'[data-target="'+d+'"],'+this.selector+'[href="'+d+'"]',f=b(e).parent("li").addClass("active"),f.parent(".dropdown-menu").length&&(f=f.closest("li.dropdown").addClass("active")),f.trigger("activate")}};var c=b.fn.scrollspy;b.fn.scrollspy=function(d){return this.each(function(){var g=b(this),e=g.data("scrollspy"),f=typeof d=="object"&&d;e||g.data("scrollspy",e=new a(this,f)),typeof d=="string"&&e[d]()})},b.fn.scrollspy.Constructor=a,b.fn.scrollspy.defaults={offset:10},b.fn.scrollspy.noConflict=function(){return b.fn.scrollspy=c,this},b(window).on("load",function(){b('[data-spy="scroll"]').each(function(){var d=b(this);d.scrollspy(d.data())})})}(window.jQuery),!function(b){var a=function(d){this.element=b(d)};a.prototype={constructor:a,show:function(){var e=this.element,j=e.closest("ul:not(.dropdown-menu)"),g=e.attr("data-target"),d,f,h;g||(g=e.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,""));if(e.parent("li").hasClass("active")){return}d=j.find(".active:last a")[0],h=b.Event("show",{relatedTarget:d}),e.trigger(h);if(h.isDefaultPrevented()){return}f=b(g),this.activate(e.parent("li"),j),this.activate(f,f.parent(),function(){e.trigger({type:"shown",relatedTarget:d})})},activate:function(e,j,g){function h(){d.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),f?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),g&&g()}var d=j.find("> .active"),f=g&&b.support.transition&&d.hasClass("fade");f?d.one(b.support.transition.end,h):h(),d.removeClass("in")}};var c=b.fn.tab;b.fn.tab=function(d){return this.each(function(){var f=b(this),e=f.data("tab");e||f.data("tab",e=new a(this)),typeof d=="string"&&e[d]()})},b.fn.tab.Constructor=a,b.fn.tab.noConflict=function(){return b.fn.tab=c,this},b(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(d){d.preventDefault(),b(this).tab("show")})}(window.jQuery),!function(b){var a=function(d,e){this.$element=b(d),this.options=b.extend({},b.fn.typeahead.defaults,e),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=b(this.options.menu),this.shown=!1,this.listen()};a.prototype={constructor:a,select:function(){var d=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(d)).change(),this.hide()},updater:function(d){return d},show:function(){var d=b.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:d.top+d.height,left:d.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(d){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=b.isFunction(this.source)?this.source(this.query,b.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(d){var e=this;return d=b.grep(d,function(f){return e.matcher(f)}),d=this.sorter(d),d.length?this.render(d.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(d){return ~d.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(h){var f=[],j=[],g=[],d;while(d=h.shift()){d.toLowerCase().indexOf(this.query.toLowerCase())?~d.indexOf(this.query)?j.push(d):g.push(d):f.push(d)}return f.concat(j,g)},highlighter:function(f){var d=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return f.replace(new RegExp("("+d+")","ig"),function(h,g){return"<strong>"+g+"</strong>"})},render:function(d){var e=this;return d=b(d).map(function(f,g){return f=b(e.options.item).attr("data-value",g),f.find("a").html(e.highlighter(g)),f[0]}),d.first().addClass("active"),this.$menu.html(d),this},next:function(d){var f=this.$menu.find(".active").removeClass("active"),e=f.next();e.length||(e=b(this.$menu.find("li")[0])),e.addClass("active")},prev:function(f){var d=this.$menu.find(".active").removeClass("active"),g=d.prev();g.length||(g=this.$menu.find("li").last()),g.addClass("active")},listen:function(){this.$element.on("focus",b.proxy(this.focus,this)).on("blur",b.proxy(this.blur,this)).on("keypress",b.proxy(this.keypress,this)).on("keyup",b.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",b.proxy(this.keydown,this)),this.$menu.on("click",b.proxy(this.click,this)).on("mouseenter","li",b.proxy(this.mouseenter,this)).on("mouseleave","li",b.proxy(this.mouseleave,this))},eventSupported:function(f){var d=f in this.$element;return d||(this.$element.setAttribute(f,"return;"),d=typeof this.$element[f]=="function"),d},move:function(d){if(!this.shown){return}switch(d.keyCode){case 9:case 13:case 27:d.preventDefault();break;case 38:d.preventDefault(),this.prev();break;case 40:d.preventDefault(),this.next()}d.stopPropagation()},keydown:function(d){this.suppressKeyPressRepeat=~b.inArray(d.keyCode,[40,38,9,13,27]),this.move(d)},keypress:function(d){if(this.suppressKeyPressRepeat){return}this.move(d)},keyup:function(d){switch(d.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}d.stopPropagation(),d.preventDefault()},focus:function(d){this.focused=!0},blur:function(d){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(d){d.stopPropagation(),d.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(d){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),b(d.currentTarget).addClass("active")},mouseleave:function(d){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=b.fn.typeahead;b.fn.typeahead=function(d){return this.each(function(){var g=b(this),e=g.data("typeahead"),f=typeof d=="object"&&d;e||g.data("typeahead",e=new a(this,f)),typeof d=="string"&&e[d]()})},b.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},b.fn.typeahead.Constructor=a,b.fn.typeahead.noConflict=function(){return b.fn.typeahead=c,this},b(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(d){var e=b(this);if(e.data("typeahead")){return}e.typeahead(e.data())})}(window.jQuery),!function(b){var a=function(d,e){this.options=b.extend({},b.fn.affix.defaults,e),this.$window=b(window).on("scroll.affix.data-api",b.proxy(this.checkPosition,this)).on("click.affix.data-api",b.proxy(function(){setTimeout(b.proxy(this.checkPosition,this),1)},this)),this.$element=b(d),this.checkPosition()};a.prototype.checkPosition=function(){if(!this.$element.is(":visible")){return}var g=b(document).height(),l=this.$window.scrollTop(),j=this.$element.offset(),f=this.options.offset,h=f.bottom,k=f.top,e="affix affix-top affix-bottom",d;typeof f!="object"&&(h=k=f),typeof k=="function"&&(k=f.top()),typeof h=="function"&&(h=f.bottom()),d=this.unpin!=null&&l+this.unpin<=j.top?!1:h!=null&&j.top+this.$element.height()>=g-h?"bottom":k!=null&&l<=k?"top":!1;if(this.affixed===d){return}this.affixed=d,this.unpin=d=="bottom"?j.top-l:null,this.$element.removeClass(e).addClass("affix"+(d?"-"+d:""))};var c=b.fn.affix;b.fn.affix=function(d){return this.each(function(){var g=b(this),e=g.data("affix"),f=typeof d=="object"&&d;e||g.data("affix",e=new a(this,f)),typeof d=="string"&&e[d]()})},b.fn.affix.Constructor=a,b.fn.affix.defaults={offset:0},b.fn.affix.noConflict=function(){return b.fn.affix=c,this},b(window).on("load",function(){b('[data-spy="affix"]').each(function(){var d=b(this),e=d.data();e.offset=e.offset||{},e.offsetBottom&&(e.offset.bottom=e.offsetBottom),e.offsetTop&&(e.offset.top=e.offsetTop),d.affix(e)})})}(window.jQuery);
(function(){var w=this;var k=w._;var D={};var C=Array.prototype,f=Object.prototype,r=Function.prototype;var G=C.push,o=C.slice,y=C.concat,d=f.toString,j=f.hasOwnProperty;var K=C.forEach,q=C.map,E=C.reduce,c=C.reduceRight,b=C.filter,B=C.every,p=C.some,n=C.indexOf,l=C.lastIndexOf,u=Array.isArray,e=Object.keys,F=r.bind;var L=function(M){if(M instanceof L){return M}if(!(this instanceof L)){return new L(M)}this._wrapped=M};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=L}exports._=L}else{w._=L}L.VERSION="1.4.4";var H=L.each=L.forEach=function(R,Q,P){if(R==null){return}if(K&&R.forEach===K){R.forEach(Q,P)}else{if(R.length===+R.length){for(var O=0,M=R.length;O<M;O++){if(Q.call(P,R[O],O,R)===D){return}}}else{for(var N in R){if(L.has(R,N)){if(Q.call(P,R[N],N,R)===D){return}}}}}};L.map=L.collect=function(P,O,N){var M=[];if(P==null){return M}if(q&&P.map===q){return P.map(O,N)}H(P,function(S,Q,R){M[M.length]=O.call(N,S,Q,R)});return M};var g="Reduce of empty array with no initial value";L.reduce=L.foldl=L.inject=function(Q,P,M,O){var N=arguments.length>2;if(Q==null){Q=[]}if(E&&Q.reduce===E){if(O){P=L.bind(P,O)}return N?Q.reduce(P,M):Q.reduce(P)}H(Q,function(T,R,S){if(!N){M=T;N=true}else{M=P.call(O,M,T,R,S)}});if(!N){throw new TypeError(g)}return M};L.reduceRight=L.foldr=function(S,P,M,O){var N=arguments.length>2;if(S==null){S=[]}if(c&&S.reduceRight===c){if(O){P=L.bind(P,O)}return N?S.reduceRight(P,M):S.reduceRight(P)}var R=S.length;if(R!==+R){var Q=L.keys(S);R=Q.length}H(S,function(V,T,U){T=Q?Q[--R]:--R;if(!N){M=S[T];N=true}else{M=P.call(O,M,S[T],T,U)}});if(!N){throw new TypeError(g)}return M};L.find=L.detect=function(P,O,N){var M;A(P,function(S,Q,R){if(O.call(N,S,Q,R)){M=S;return true}});return M};L.filter=L.select=function(P,O,N){var M=[];if(P==null){return M}if(b&&P.filter===b){return P.filter(O,N)}H(P,function(S,Q,R){if(O.call(N,S,Q,R)){M[M.length]=S}});return M};L.reject=function(O,N,M){return L.filter(O,function(R,P,Q){return !N.call(M,R,P,Q)},M)};L.every=L.all=function(P,O,N){O||(O=L.identity);var M=true;if(P==null){return M}if(B&&P.every===B){return P.every(O,N)}H(P,function(S,Q,R){if(!(M=M&&O.call(N,S,Q,R))){return D}});return !!M};var A=L.some=L.any=function(P,O,N){O||(O=L.identity);var M=false;if(P==null){return M}if(p&&P.some===p){return P.some(O,N)}H(P,function(S,Q,R){if(M||(M=O.call(N,S,Q,R))){return D}});return !!M};L.contains=L.include=function(N,M){if(N==null){return false}if(n&&N.indexOf===n){return N.indexOf(M)!=-1}return A(N,function(O){return O===M})};L.invoke=function(O,P){var M=o.call(arguments,2);var N=L.isFunction(P);return L.map(O,function(Q){return(N?P:Q[P]).apply(Q,M)})};L.pluck=function(N,M){return L.map(N,function(O){return O[M]})};L.where=function(N,M,O){if(L.isEmpty(M)){return O?null:[]}return L[O?"find":"filter"](N,function(Q){for(var P in M){if(M[P]!==Q[P]){return false}}return true})};L.findWhere=function(N,M){return L.where(N,M,true)};L.max=function(P,O,N){if(!O&&L.isArray(P)&&P[0]===+P[0]&&P.length<65535){return Math.max.apply(Math,P)}if(!O&&L.isEmpty(P)){return -Infinity}var M={computed:-Infinity,value:-Infinity};H(P,function(T,Q,S){var R=O?O.call(N,T,Q,S):T;R>=M.computed&&(M={value:T,computed:R})});return M.value};L.min=function(P,O,N){if(!O&&L.isArray(P)&&P[0]===+P[0]&&P.length<65535){return Math.min.apply(Math,P)}if(!O&&L.isEmpty(P)){return Infinity}var M={computed:Infinity,value:Infinity};H(P,function(T,Q,S){var R=O?O.call(N,T,Q,S):T;R<M.computed&&(M={value:T,computed:R})});return M.value};L.shuffle=function(P){var O;var N=0;var M=[];H(P,function(Q){O=L.random(N++);M[N-1]=M[O];M[O]=Q});return M};var a=function(M){return L.isFunction(M)?M:function(N){return N[M]}};L.sortBy=function(P,O,M){var N=a(O);return L.pluck(L.map(P,function(S,Q,R){return{value:S,index:Q,criteria:N.call(M,S,Q,R)}}).sort(function(T,S){var R=T.criteria;var Q=S.criteria;if(R!==Q){if(R>Q||R===void 0){return 1}if(R<Q||Q===void 0){return -1}}return T.index<S.index?-1:1}),"value")};var t=function(R,Q,N,P){var M={};var O=a(Q||L.identity);H(R,function(U,S){var T=O.call(N,U,S,R);P(M,T,U)});return M};L.groupBy=function(O,N,M){return t(O,N,M,function(P,Q,R){(L.has(P,Q)?P[Q]:(P[Q]=[])).push(R)})};L.countBy=function(O,N,M){return t(O,N,M,function(P,Q){if(!L.has(P,Q)){P[Q]=0}P[Q]++})};L.sortedIndex=function(T,S,P,O){P=P==null?L.identity:a(P);var R=P.call(O,S);var M=0,Q=T.length;while(M<Q){var N=(M+Q)>>>1;P.call(O,T[N])<R?M=N+1:Q=N}return M};L.toArray=function(M){if(!M){return[]}if(L.isArray(M)){return o.call(M)}if(M.length===+M.length){return L.map(M,L.identity)}return L.values(M)};L.size=function(M){if(M==null){return 0}return(M.length===+M.length)?M.length:L.keys(M).length};L.first=L.head=L.take=function(O,N,M){if(O==null){return void 0}return(N!=null)&&!M?o.call(O,0,N):O[0]};L.initial=function(O,N,M){return o.call(O,0,O.length-((N==null)||M?1:N))};L.last=function(O,N,M){if(O==null){return void 0}if((N!=null)&&!M){return o.call(O,Math.max(O.length-N,0))}else{return O[O.length-1]}};L.rest=L.tail=L.drop=function(O,N,M){return o.call(O,(N==null)||M?1:N)};L.compact=function(M){return L.filter(M,L.identity)};var x=function(N,O,M){H(N,function(P){if(L.isArray(P)){O?G.apply(M,P):x(P,O,M)}else{M.push(P)}});return M};L.flatten=function(N,M){return x(N,M,[])};L.without=function(M){return L.difference(M,o.call(arguments,1))};L.uniq=L.unique=function(S,R,Q,P){if(L.isFunction(R)){P=Q;Q=R;R=false}var N=Q?L.map(S,Q,P):S;var O=[];var M=[];H(N,function(U,T){if(R?(!T||M[M.length-1]!==U):!L.contains(M,U)){M.push(U);O.push(S[T])}});return O};L.union=function(){return L.uniq(y.apply(C,arguments))};L.intersection=function(N){var M=o.call(arguments,1);return L.filter(L.uniq(N),function(O){return L.every(M,function(P){return L.indexOf(P,O)>=0})})};L.difference=function(N){var M=y.apply(C,o.call(arguments,1));return L.filter(N,function(O){return !L.contains(M,O)})};L.zip=function(){var M=o.call(arguments);var P=L.max(L.pluck(M,"length"));var O=new Array(P);for(var N=0;N<P;N++){O[N]=L.pluck(M,""+N)}return O};L.object=function(Q,O){if(Q==null){return{}}var M={};for(var P=0,N=Q.length;P<N;P++){if(O){M[Q[P]]=O[P]}else{M[Q[P][0]]=Q[P][1]}}return M};L.indexOf=function(Q,O,P){if(Q==null){return -1}var N=0,M=Q.length;if(P){if(typeof P=="number"){N=(P<0?Math.max(0,M+P):P)}else{N=L.sortedIndex(Q,O);return Q[N]===O?N:-1}}if(n&&Q.indexOf===n){return Q.indexOf(O,P)}for(;N<M;N++){if(Q[N]===O){return N}}return -1};L.lastIndexOf=function(Q,O,P){if(Q==null){return -1}var M=P!=null;if(l&&Q.lastIndexOf===l){return M?Q.lastIndexOf(O,P):Q.lastIndexOf(O)}var N=(M?P:Q.length);while(N--){if(Q[N]===O){return N}}return -1};L.range=function(R,P,Q){if(arguments.length<=1){P=R||0;R=0}Q=arguments[2]||1;var N=Math.max(Math.ceil((P-R)/Q),0);var M=0;var O=new Array(N);while(M<N){O[M++]=R;R+=Q}return O};L.bind=function(O,N){if(O.bind===F&&F){return F.apply(O,o.call(arguments,1))}var M=o.call(arguments,2);return function(){return O.apply(N,M.concat(o.call(arguments)))}};L.partial=function(N){var M=o.call(arguments,1);return function(){return N.apply(this,M.concat(o.call(arguments)))}};L.bindAll=function(N){var M=o.call(arguments,1);if(M.length===0){M=L.functions(N)}H(M,function(O){N[O]=L.bind(N[O],N)});return N};L.memoize=function(O,N){var M={};N||(N=L.identity);return function(){var P=N.apply(this,arguments);return L.has(M,P)?M[P]:(M[P]=O.apply(this,arguments))}};L.delay=function(N,O){var M=o.call(arguments,2);return setTimeout(function(){return N.apply(null,M)},O)};L.defer=function(M){return L.delay.apply(L,[M,1].concat(o.call(arguments,1)))};L.throttle=function(R,T){var P,O,S,M;var Q=0;var N=function(){Q=new Date;S=null;M=R.apply(P,O)};return function(){var U=new Date;var V=T-(U-Q);P=this;O=arguments;if(V<=0){clearTimeout(S);S=null;Q=U;M=R.apply(P,O)}else{if(!S){S=setTimeout(N,V)}}return M}};L.debounce=function(O,Q,N){var P,M;return function(){var U=this,T=arguments;var S=function(){P=null;if(!N){M=O.apply(U,T)}};var R=N&&!P;clearTimeout(P);P=setTimeout(S,Q);if(R){M=O.apply(U,T)}return M}};L.once=function(O){var M=false,N;return function(){if(M){return N}M=true;N=O.apply(this,arguments);O=null;return N}};L.wrap=function(M,N){return function(){var O=[M];G.apply(O,arguments);return N.apply(this,O)}};L.compose=function(){var M=arguments;return function(){var N=arguments;for(var O=M.length-1;O>=0;O--){N=[M[O].apply(this,N)]}return N[0]}};L.after=function(N,M){if(N<=0){return M()}return function(){if(--N<1){return M.apply(this,arguments)}}};L.keys=e||function(O){if(O!==Object(O)){throw new TypeError("Invalid object")}var N=[];for(var M in O){if(L.has(O,M)){N[N.length]=M}}return N};L.values=function(O){var M=[];for(var N in O){if(L.has(O,N)){M.push(O[N])}}return M};L.pairs=function(O){var N=[];for(var M in O){if(L.has(O,M)){N.push([M,O[M]])}}return N};L.invert=function(O){var M={};for(var N in O){if(L.has(O,N)){M[O[N]]=N}}return M};L.functions=L.methods=function(O){var N=[];for(var M in O){if(L.isFunction(O[M])){N.push(M)}}return N.sort()};L.extend=function(M){H(o.call(arguments,1),function(N){if(N){for(var O in N){M[O]=N[O]}}});return M};L.pick=function(N){var O={};var M=y.apply(C,o.call(arguments,1));H(M,function(P){if(P in N){O[P]=N[P]}});return O};L.omit=function(O){var P={};var N=y.apply(C,o.call(arguments,1));for(var M in O){if(!L.contains(N,M)){P[M]=O[M]}}return P};L.defaults=function(M){H(o.call(arguments,1),function(N){if(N){for(var O in N){if(M[O]==null){M[O]=N[O]}}}});return M};L.clone=function(M){if(!L.isObject(M)){return M}return L.isArray(M)?M.slice():L.extend({},M)};L.tap=function(N,M){M(N);return N};var I=function(T,S,N,O){if(T===S){return T!==0||1/T==1/S}if(T==null||S==null){return T===S}if(T instanceof L){T=T._wrapped}if(S instanceof L){S=S._wrapped}var Q=d.call(T);if(Q!=d.call(S)){return false}switch(Q){case"[object String]":return T==String(S);case"[object Number]":return T!=+T?S!=+S:(T==0?1/T==1/S:T==+S);case"[object Date]":case"[object Boolean]":return +T==+S;case"[object RegExp]":return T.source==S.source&&T.global==S.global&&T.multiline==S.multiline&&T.ignoreCase==S.ignoreCase}if(typeof T!="object"||typeof S!="object"){return false}var M=N.length;while(M--){if(N[M]==T){return O[M]==S}}N.push(T);O.push(S);var V=0,W=true;if(Q=="[object Array]"){V=T.length;W=V==S.length;if(W){while(V--){if(!(W=I(T[V],S[V],N,O))){break}}}}else{var R=T.constructor,P=S.constructor;if(R!==P&&!(L.isFunction(R)&&(R instanceof R)&&L.isFunction(P)&&(P instanceof P))){return false}for(var U in T){if(L.has(T,U)){V++;if(!(W=L.has(S,U)&&I(T[U],S[U],N,O))){break}}}if(W){for(U in S){if(L.has(S,U)&&!(V--)){break}}W=!V}}N.pop();O.pop();return W};L.isEqual=function(N,M){return I(N,M,[],[])};L.isEmpty=function(N){if(N==null){return true}if(L.isArray(N)||L.isString(N)){return N.length===0}for(var M in N){if(L.has(N,M)){return false}}return true};L.isElement=function(M){return !!(M&&M.nodeType===1)};L.isArray=u||function(M){return d.call(M)=="[object Array]"};L.isObject=function(M){return M===Object(M)};H(["Arguments","Function","String","Number","Date","RegExp"],function(M){L["is"+M]=function(N){return d.call(N)=="[object "+M+"]"}});if(!L.isArguments(arguments)){L.isArguments=function(M){return !!(M&&L.has(M,"callee"))}}if(typeof(/./)!=="function"){L.isFunction=function(M){return typeof M==="function"}}L.isFinite=function(M){return isFinite(M)&&!isNaN(parseFloat(M))};L.isNaN=function(M){return L.isNumber(M)&&M!=+M};L.isBoolean=function(M){return M===true||M===false||d.call(M)=="[object Boolean]"};L.isNull=function(M){return M===null};L.isUndefined=function(M){return M===void 0};L.has=function(N,M){return j.call(N,M)};L.noConflict=function(){w._=k;return this};L.identity=function(M){return M};L.times=function(Q,P,O){var M=Array(Q);for(var N=0;N<Q;N++){M[N]=P.call(O,N)}return M};L.random=function(N,M){if(M==null){M=N;N=0}return N+Math.floor(Math.random()*(M-N+1))};var m={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};m.unescape=L.invert(m.escape);var J={escape:new RegExp("["+L.keys(m.escape).join("")+"]","g"),unescape:new RegExp("("+L.keys(m.unescape).join("|")+")","g")};L.each(["escape","unescape"],function(M){L[M]=function(N){if(N==null){return""}return(""+N).replace(J[M],function(O){return m[M][O]})}});L.result=function(M,O){if(M==null){return null}var N=M[O];return L.isFunction(N)?N.call(M):N};L.mixin=function(M){H(L.functions(M),function(N){var O=L[N]=M[N];L.prototype[N]=function(){var P=[this._wrapped];G.apply(P,arguments);return s.call(this,O.apply(L,P))}})};var z=0;L.uniqueId=function(M){var N=++z+"";return M?M+N:N};L.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var v=/(.)^/;var h={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var i=/\\|'|\r|\n|\t|\u2028|\u2029/g;L.template=function(U,P,O){var N;O=L.defaults({},O,L.templateSettings);var Q=new RegExp([(O.escape||v).source,(O.interpolate||v).source,(O.evaluate||v).source].join("|")+"|$","g");var R=0;var M="__p+='";U.replace(Q,function(W,X,V,Z,Y){M+=U.slice(R,Y).replace(i,function(aa){return"\\"+h[aa]});if(X){M+="'+\n((__t=("+X+"))==null?'':_.escape(__t))+\n'"}if(V){M+="'+\n((__t=("+V+"))==null?'':__t)+\n'"}if(Z){M+="';\n"+Z+"\n__p+='"}R=Y+W.length;return W});M+="';\n";if(!O.variable){M="with(obj||{}){\n"+M+"}\n"}M="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+M+"return __p;\n";try{N=new Function(O.variable||"obj","_",M)}catch(S){S.source=M;throw S}if(P){return N(P,L)}var T=function(V){return N.call(this,V,L)};T.source="function("+(O.variable||"obj")+"){\n"+M+"}";return T};L.chain=function(M){return L(M).chain()};var s=function(M){return this._chain?L(M).chain():M};L.mixin(L);H(["pop","push","reverse","shift","sort","splice","unshift"],function(M){var N=C[M];L.prototype[M]=function(){var O=this._wrapped;N.apply(O,arguments);if((M=="shift"||M=="splice")&&O.length===0){delete O[0]}return s.call(this,O)}});H(["concat","join","slice"],function(M){var N=C[M];L.prototype[M]=function(){return s.call(this,N.apply(this._wrapped,arguments))}});L.extend(L.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);
(function(){var s=this;var q=s.Backbone;var i=[];var h=i.push;var r=i.slice;var B=i.splice;var d;if(typeof exports!=="undefined"){d=exports}else{d=s.Backbone={}}d.VERSION="0.9.10";var D=s._;if(!D&&(typeof require!=="undefined")){D=require("underscore")}d.$=s.jQuery||s.Zepto||s.ender;d.noConflict=function(){s.Backbone=q;return this};d.emulateHTTP=false;d.emulateJSON=false;var a=/\s+/;var F=function(N,L,H,K){if(!H){return true}if(typeof H==="object"){for(var J in H){N[L].apply(N,[J,H[J]].concat(K))}}else{if(a.test(H)){var M=H.split(a);for(var I=0,G=M.length;I<G;I++){N[L].apply(N,[M[I]].concat(K))}}else{return true}}};var e=function(J,H){var K,I=-1,G=J.length;switch(H.length){case 0:while(++I<G){(K=J[I]).callback.call(K.ctx)}return;case 1:while(++I<G){(K=J[I]).callback.call(K.ctx,H[0])}return;case 2:while(++I<G){(K=J[I]).callback.call(K.ctx,H[0],H[1])}return;case 3:while(++I<G){(K=J[I]).callback.call(K.ctx,H[0],H[1],H[2])}return;default:while(++I<G){(K=J[I]).callback.apply(K.ctx,H)}}};var p=d.Events={on:function(G,J,H){if(!(F(this,"on",G,[J,H])&&J)){return this}this._events||(this._events={});var I=this._events[G]||(this._events[G]=[]);I.push({callback:J,context:H,ctx:H||this});return this},once:function(H,K,I){if(!(F(this,"once",H,[K,I])&&K)){return this}var G=this;var J=D.once(function(){G.off(H,J);K.apply(this,arguments)});J._callback=K;this.on(H,J,I);return this},off:function(G,P,H){var M,O,Q,N,L,I,K,J;if(!this._events||!F(this,"off",G,[P,H])){return this}if(!G&&!P&&!H){this._events={};return this}N=G?[G]:D.keys(this._events);for(L=0,I=N.length;L<I;L++){G=N[L];if(M=this._events[G]){Q=[];if(P||H){for(K=0,J=M.length;K<J;K++){O=M[K];if((P&&P!==O.callback&&P!==O.callback._callback)||(H&&H!==O.context)){Q.push(O)}}}this._events[G]=Q}}return this},trigger:function(I){if(!this._events){return this}var H=r.call(arguments,1);if(!F(this,"trigger",I,H)){return this}var J=this._events[I];var G=this._events.all;if(J){e(J,H)}if(G){e(G,arguments)}return this},listenTo:function(I,G,K){var H=this._listeners||(this._listeners={});var J=I._listenerId||(I._listenerId=D.uniqueId("l"));H[J]=I;I.on(G,typeof G==="object"?this:K,this);return this},stopListening:function(I,G,K){var H=this._listeners;if(!H){return}if(I){I.off(G,typeof G==="object"?this:K,this);if(!G&&!K){delete H[I._listenerId]}}else{if(typeof G==="object"){K=this}for(var J in H){H[J].off(G,K,this)}this._listeners={}}return this}};p.bind=p.on;p.unbind=p.off;D.extend(d,p);var n=d.Model=function(G,I){var J;var H=G||{};this.cid=D.uniqueId("c");this.attributes={};if(I&&I.collection){this.collection=I.collection}if(I&&I.parse){H=this.parse(H,I)||{}}if(J=D.result(this,"defaults")){H=D.defaults({},H,J)}this.set(H,I);this.changed={};this.initialize.apply(this,arguments)};D.extend(n.prototype,p,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(G){return D.clone(this.attributes)},sync:function(){return d.sync.apply(this,arguments)},get:function(G){return this.attributes[G]},escape:function(G){return D.escape(this.get(G))},has:function(G){return this.get(G)!=null},set:function(O,G,S){var M,P,Q,N,L,R,I,K;if(O==null){return this}if(typeof O==="object"){P=O;S=G}else{(P={})[O]=G}S||(S={});if(!this._validate(P,S)){return false}Q=S.unset;L=S.silent;N=[];R=this._changing;this._changing=true;if(!R){this._previousAttributes=D.clone(this.attributes);this.changed={}}K=this.attributes,I=this._previousAttributes;if(this.idAttribute in P){this.id=P[this.idAttribute]}for(M in P){G=P[M];if(!D.isEqual(K[M],G)){N.push(M)}if(!D.isEqual(I[M],G)){this.changed[M]=G}else{delete this.changed[M]}Q?delete K[M]:K[M]=G}if(!L){if(N.length){this._pending=true}for(var J=0,H=N.length;J<H;J++){this.trigger("change:"+N[J],this,K[N[J]],S)}}if(R){return this}if(!L){while(this._pending){this._pending=false;this.trigger("change",this,S)}}this._pending=false;this._changing=false;return this},unset:function(G,H){return this.set(G,void 0,D.extend({},H,{unset:true}))},clear:function(H){var G={};for(var I in this.attributes){G[I]=void 0}return this.set(G,D.extend({},H,{unset:true}))},hasChanged:function(G){if(G==null){return !D.isEmpty(this.changed)}return D.has(this.changed,G)},changedAttributes:function(I){if(!I){return this.hasChanged()?D.clone(this.changed):false}var K,J=false;var H=this._changing?this._previousAttributes:this.attributes;for(var G in I){if(D.isEqual(H[G],(K=I[G]))){continue}(J||(J={}))[G]=K}return J},previous:function(G){if(G==null||!this._previousAttributes){return null}return this._previousAttributes[G]},previousAttributes:function(){return D.clone(this._previousAttributes)},fetch:function(G){G=G?D.clone(G):{};if(G.parse===void 0){G.parse=true}var H=G.success;G.success=function(J,K,I){if(!J.set(J.parse(K,I),I)){return false}if(H){H(J,K,I)}};return this.sync("read",this,G)},save:function(J,M,I){var H,L,N,K,G=this.attributes;if(J==null||typeof J==="object"){H=J;I=M}else{(H={})[J]=M}if(H&&(!I||!I.wait)&&!this.set(H,I)){return false}I=D.extend({validate:true},I);if(!this._validate(H,I)){return false}if(H&&I.wait){this.attributes=D.extend({},G,H)}if(I.parse===void 0){I.parse=true}L=I.success;I.success=function(P,R,O){P.attributes=G;var Q=P.parse(R,O);if(O.wait){Q=D.extend(H||{},Q)}if(D.isObject(Q)&&!P.set(Q,O)){return false}if(L){L(P,R,O)}};N=this.isNew()?"create":(I.patch?"patch":"update");if(N==="patch"){I.attrs=H}K=this.sync(N,this,I);if(H&&I.wait){this.attributes=G}return K},destroy:function(H){H=H?D.clone(H):{};var G=this;var K=H.success;var I=function(){G.trigger("destroy",G,G.collection,H)};H.success=function(M,N,L){if(L.wait||M.isNew()){I()}if(K){K(M,N,L)}};if(this.isNew()){H.success(this,null,H);return false}var J=this.sync("delete",this,H);if(!H.wait){I()}return J},url:function(){var G=D.result(this,"urlRoot")||D.result(this.collection,"url")||v();if(this.isNew()){return G}return G+(G.charAt(G.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(H,G){return H},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(G){return !this.validate||!this.validate(this.attributes,G)},_validate:function(I,H){if(!H.validate||!this.validate){return true}I=D.extend({},this.attributes,I);var G=this.validationError=this.validate(I,H)||null;if(!G){return true}this.trigger("invalid",this,G,H||{});return false}});var E=d.Collection=function(H,G){G||(G={});if(G.model){this.model=G.model}if(G.comparator!==void 0){this.comparator=G.comparator}this.models=[];this._reset();this.initialize.apply(this,arguments);if(H){this.reset(H,D.extend({silent:true},G))}};D.extend(E.prototype,p,{model:n,initialize:function(){},toJSON:function(G){return this.map(function(H){return H.toJSON(G)})},sync:function(){return d.sync.apply(this,arguments)},add:function(G,R){G=D.isArray(G)?G.slice():[G];R||(R={});var M,J,N,P,H,O,Q,I,L,K;Q=[];I=R.at;L=this.comparator&&(I==null)&&R.sort!=false;K=D.isString(this.comparator)?this.comparator:null;for(M=0,J=G.length;M<J;M++){if(!(N=this._prepareModel(P=G[M],R))){this.trigger("invalid",this,P,R);continue}if(H=this.get(N)){if(R.merge){H.set(P===N?N.attributes:P,R);if(L&&!O&&H.hasChanged(K)){O=true}}continue}Q.push(N);N.on("all",this._onModelEvent,this);this._byId[N.cid]=N;if(N.id!=null){this._byId[N.id]=N}}if(Q.length){if(L){O=true}this.length+=Q.length;if(I!=null){B.apply(this.models,[I,0].concat(Q))}else{h.apply(this.models,Q)}}if(O){this.sort({silent:true})}if(R.silent){return this}for(M=0,J=Q.length;M<J;M++){(N=Q[M]).trigger("add",N,this,R)}if(O){this.trigger("sort",this,R)}return this},remove:function(L,J){L=D.isArray(L)?L.slice():[L];J||(J={});var K,G,I,H;for(K=0,G=L.length;K<G;K++){H=this.get(L[K]);if(!H){continue}delete this._byId[H.id];delete this._byId[H.cid];I=this.indexOf(H);this.models.splice(I,1);this.length--;if(!J.silent){J.index=I;H.trigger("remove",H,this,J)}this._removeReference(H)}return this},push:function(H,G){H=this._prepareModel(H,G);this.add(H,D.extend({at:this.length},G));return H},pop:function(H){var G=this.at(this.length-1);this.remove(G,H);return G},unshift:function(H,G){H=this._prepareModel(H,G);this.add(H,D.extend({at:0},G));return H},shift:function(H){var G=this.at(0);this.remove(G,H);return G},slice:function(H,G){return this.models.slice(H,G)},get:function(G){if(G==null){return void 0}this._idAttr||(this._idAttr=this.model.prototype.idAttribute);return this._byId[G.id||G.cid||G[this._idAttr]||G]},at:function(G){return this.models[G]},where:function(G){if(D.isEmpty(G)){return[]}return this.filter(function(H){for(var I in G){if(G[I]!==H.get(I)){return false}}return true})},sort:function(G){if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}G||(G={});if(D.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(D.bind(this.comparator,this))}if(!G.silent){this.trigger("sort",this,G)}return this},pluck:function(G){return D.invoke(this.models,"get",G)},update:function(G,O){O=D.extend({add:true,merge:true,remove:true},O);if(O.parse){G=this.parse(G,O)}var M,K,I,H;var N=[],L=[],J={};if(!D.isArray(G)){G=G?[G]:[]}if(O.add&&!O.remove){return this.add(G,O)}for(K=0,I=G.length;K<I;K++){M=G[K];H=this.get(M);if(O.remove&&H){J[H.cid]=true}if((O.add&&!H)||(O.merge&&H)){N.push(M)}}if(O.remove){for(K=0,I=this.models.length;K<I;K++){M=this.models[K];if(!J[M.cid]){L.push(M)}}}if(L.length){this.remove(L,O)}if(N.length){this.add(N,O)}return this},reset:function(J,H){H||(H={});if(H.parse){J=this.parse(J,H)}for(var I=0,G=this.models.length;I<G;I++){this._removeReference(this.models[I])}H.previousModels=this.models.slice();this._reset();if(J){this.add(J,D.extend({silent:true},H))}if(!H.silent){this.trigger("reset",this,H)}return this},fetch:function(G){G=G?D.clone(G):{};if(G.parse===void 0){G.parse=true}var H=G.success;G.success=function(K,J,I){var L=I.update?"update":"reset";K[L](J,I);if(H){H(K,J,I)}};return this.sync("read",this,G)},create:function(H,G){G=G?D.clone(G):{};if(!(H=this._prepareModel(H,G))){return false}if(!G.wait){this.add(H,G)}var J=this;var I=G.success;G.success=function(L,M,K){if(K.wait){J.add(L,K)}if(I){I(L,M,K)}};H.save(null,G);return H},parse:function(H,G){return H},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models.length=0;this._byId={}},_prepareModel:function(I,H){if(I instanceof n){if(!I.collection){I.collection=this}return I}H||(H={});H.collection=this;var G=new this.model(I,H);if(!G._validate(I,H)){return false}return G},_removeReference:function(G){if(this===G.collection){delete G.collection}G.off("all",this._onModelEvent,this)},_onModelEvent:function(I,H,J,G){if((I==="add"||I==="remove")&&J!==this){return}if(I==="destroy"){this.remove(H,G)}if(H&&I==="change:"+H.idAttribute){delete this._byId[H.previous(H.idAttribute)];if(H.id!=null){this._byId[H.id]=H}}this.trigger.apply(this,arguments)},sortedIndex:function(G,J,H){J||(J=this.comparator);var I=D.isFunction(J)?J:function(K){return K.get(J)};return D.sortedIndex(this.models,G,I,H)}});var z=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];D.each(z,function(G){E.prototype[G]=function(){var H=r.call(arguments);H.unshift(this.models);return D[G].apply(D,H)}});var j=["groupBy","countBy","sortBy"];D.each(j,function(G){E.prototype[G]=function(J,H){var I=D.isFunction(J)?J:function(K){return K.get(J)};return D[G](this.models,I,H)}});var C=d.Router=function(G){G||(G={});if(G.routes){this.routes=G.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var m=/\((.*?)\)/g;var k=/(\(\?)?:\w+/g;var A=/\*\w+/g;var f=/[\-{}\[\]+?.,\\\^$|#\s]/g;D.extend(C.prototype,p,{initialize:function(){},route:function(G,H,I){if(!D.isRegExp(G)){G=this._routeToRegExp(G)}if(!I){I=this[H]}d.history.route(G,D.bind(function(K){var J=this._extractParameters(G,K);I&&I.apply(this,J);this.trigger.apply(this,["route:"+H].concat(J));this.trigger("route",H,J);d.history.trigger("route",this,H,J)},this));return this},navigate:function(H,G){d.history.navigate(H,G);return this},_bindRoutes:function(){if(!this.routes){return}var H,G=D.keys(this.routes);while((H=G.pop())!=null){this.route(H,this.routes[H])}},_routeToRegExp:function(G){G=G.replace(f,"\\$&").replace(m,"(?:$1)?").replace(k,function(I,H){return H?I:"([^/]+)"}).replace(A,"(.*?)");return new RegExp("^"+G+"$")},_extractParameters:function(G,H){return G.exec(H).slice(1)}});var b=d.History=function(){this.handlers=[];D.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var o=/^[#\/]|\s+$/g;var y=/^\/+|\/+$/g;var l=/msie [\w.]+/;var c=/\/$/;b.started=false;D.extend(b.prototype,p,{interval:50,getHash:function(H){var G=(H||this).location.href.match(/#(.*)$/);return G?G[1]:""},getFragment:function(I,H){if(I==null){if(this._hasPushState||!this._wantsHashChange||H){I=this.location.pathname;var G=this.root.replace(c,"");if(!I.indexOf(G)){I=I.substr(G.length)}}else{I=this.getHash()}}return I.replace(o,"")},start:function(I){if(b.started){throw new Error("Backbone.history has already been started")}b.started=true;this.options=D.extend({},{root:"/"},this.options,I);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var H=this.getFragment();var G=document.documentMode;var K=(l.exec(navigator.userAgent.toLowerCase())&&(!G||G<=7));this.root=("/"+this.root+"/").replace(y,"/");if(K&&this._wantsHashChange){this.iframe=d.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(H)}if(this._hasPushState){d.$(window).on("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!K){d.$(window).on("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}this.fragment=H;var L=this.location;var J=L.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!J){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&J&&L.hash){this.fragment=this.getHash().replace(o,"");this.history.replaceState({},document.title,this.root+this.fragment+L.search)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){d.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);b.started=false},route:function(G,H){this.handlers.unshift({route:G,callback:H})},checkUrl:function(H){var G=this.getFragment();if(G===this.fragment&&this.iframe){G=this.getFragment(this.getHash(this.iframe))}if(G===this.fragment){return false}if(this.iframe){this.navigate(G)}this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(I){var H=this.fragment=this.getFragment(I);var G=D.any(this.handlers,function(J){if(J.route.test(H)){J.callback(H);return true}});return G},navigate:function(I,H){if(!b.started){return false}if(!H||H===true){H={trigger:H}}I=this.getFragment(I||"");if(this.fragment===I){return}this.fragment=I;var G=this.root+I;if(this._hasPushState){this.history[H.replace?"replaceState":"pushState"]({},document.title,G)}else{if(this._wantsHashChange){this._updateHash(this.location,I,H.replace);if(this.iframe&&(I!==this.getFragment(this.getHash(this.iframe)))){if(!H.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,I,H.replace)}}else{return this.location.assign(G)}}if(H.trigger){this.loadUrl(I)}},_updateHash:function(G,I,J){if(J){var H=G.href.replace(/(javascript:|#).*$/,"");G.replace(H+"#"+I)}else{G.hash="#"+I}}});d.history=new b;var u=d.View=function(G){this.cid=D.uniqueId("view");this._configure(G||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var g=/^(\S+)\s*(.*)$/;var w=["model","collection","el","id","attributes","className","tagName","events"];D.extend(u.prototype,p,{tagName:"div",$:function(G){return this.$el.find(G)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(G,H){if(this.$el){this.undelegateEvents()}this.$el=G instanceof d.$?G:d.$(G);this.el=this.$el[0];if(H!==false){this.delegateEvents()}return this},delegateEvents:function(K){if(!(K||(K=D.result(this,"events")))){return}this.undelegateEvents();for(var J in K){var L=K[J];if(!D.isFunction(L)){L=this[K[J]]}if(!L){throw new Error('Method "'+K[J]+'" does not exist')}var I=J.match(g);var H=I[1],G=I[2];L=D.bind(L,this);H+=".delegateEvents"+this.cid;if(G===""){this.$el.on(H,L)}else{this.$el.on(H,G,L)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(G){if(this.options){G=D.extend({},D.result(this,"options"),G)}D.extend(this,D.pick(G,w));this.options=G},_ensureElement:function(){if(!this.el){var G=D.extend({},D.result(this,"attributes"));if(this.id){G.id=D.result(this,"id")}if(this.className){G["class"]=D.result(this,"className")}var H=d.$("<"+D.result(this,"tagName")+">").attr(G);this.setElement(H,false)}else{this.setElement(D.result(this,"el"),false)}}});var t={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};d.sync=function(G,I,O){var J=t[G];D.defaults(O||(O={}),{emulateHTTP:d.emulateHTTP,emulateJSON:d.emulateJSON});var H={type:J,dataType:"json"};if(!O.url){H.url=D.result(I,"url")||v()}if(O.data==null&&I&&(G==="create"||G==="update"||G==="patch")){H.contentType="application/json";H.data=JSON.stringify(O.attrs||I.toJSON(O))}if(O.emulateJSON){H.contentType="application/x-www-form-urlencoded";H.data=H.data?{model:H.data}:{}}if(O.emulateHTTP&&(J==="PUT"||J==="DELETE"||J==="PATCH")){H.type="POST";if(O.emulateJSON){H.data._method=J}var L=O.beforeSend;O.beforeSend=function(P){P.setRequestHeader("X-HTTP-Method-Override",J);if(L){return L.apply(this,arguments)}}}if(H.type!=="GET"&&!O.emulateJSON){H.processData=false}var M=O.success;O.success=function(P){if(M){M(I,P,O)}I.trigger("sync",I,P,O)};var K=O.error;O.error=function(P){if(K){K(I,P,O)}I.trigger("error",I,P,O)};var N=O.xhr=d.ajax(D.extend(H,O));I.trigger("request",I,N,O);return N};d.ajax=function(){return d.$.ajax.apply(d.$,arguments)};var x=function(G,I){var H=this;var K;if(G&&D.has(G,"constructor")){K=G.constructor}else{K=function(){return H.apply(this,arguments)}}D.extend(K,H,I);var J=function(){this.constructor=K};J.prototype=H.prototype;K.prototype=new J;if(G){D.extend(K.prototype,G)}K.__super__=H.prototype;return K};n.extend=E.extend=C.extend=u.extend=b.extend=x;var v=function(){throw new Error('A "url" property or function must be specified')}}).call(this);
(function(){var e;var d=function d(){};var b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var c=b.length;var a=(window.console=window.console||{});while(c--){e=b[c];if(!a[e]){a[e]=d}}}());
/*!
 * accounting.js v0.3.2
 * Copyright 2011, Joss Crowcroft
 *
 * Freely distributable under the MIT license.
 * Portions of accounting.js are inspired or borrowed from underscore.js
 *
 * Full details and documentation:
 * http://josscrowcroft.github.com/accounting.js/
 */
(function(o,g){var n={};n.version="0.3.2";n.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var p=Array.prototype.map,j=Array.isArray,f=Object.prototype.toString;function c(r){return !!(r===""||(r&&r.charCodeAt&&r.substr))}function k(r){return j?j(r):f.call(r)==="[object Array]"}function q(r){return r&&f.call(r)==="[object Object]"}function h(s,r){var t;s=s||{};r=r||{};for(t in r){if(r.hasOwnProperty(t)){if(s[t]==null){s[t]=r[t]}}}return s}function a(w,v,u){var t=[],s,r;if(!w){return t}if(p&&w.map===p){return w.map(v,u)}for(s=0,r=w.length;s<r;s++){t[s]=v.call(u,w[s],s,w)}return t}function l(s,r){s=Math.round(Math.abs(s));return isNaN(s)?r:s}function e(s){var r=n.settings.currency.format;if(typeof s==="function"){s=s()}if(c(s)&&s.match("%v")){return{pos:s,neg:s.replace("-","").replace("%v","-%v"),zero:s}}else{if(!s||!s.pos||!s.pos.match("%v")){return(!c(r))?r:n.settings.currency.format={pos:r,neg:r.replace("%v","-%v"),zero:r}}}return s}var i=n.unformat=n.parse=function(u,r){if(k(u)){return a(u,function(v){return i(v,r)})}u=u||0;if(typeof u==="number"){return u}r=r||n.settings.number.decimal;var t=new RegExp("[^0-9-"+r+"]",["g"]),s=parseFloat((""+u).replace(/\((.*)\)/,"-$1").replace(t,"").replace(r,"."));return !isNaN(s)?s:0};var b=n.toFixed=function(t,r){r=l(r,n.settings.number.precision);var s=Math.pow(10,r);return(Math.round(n.unformat(t)*s)/s).toFixed(r)};var d=n.formatNumber=function(t,w,z,v){if(k(t)){return a(t,function(A){return d(A,w,z,v)})}t=i(t);var r=h((q(w)?w:{precision:w,thousand:z,decimal:v}),n.settings.number),x=l(r.precision),u=t<0?"-":"",s=parseInt(b(Math.abs(t||0),x),10)+"",y=s.length>3?s.length%3:0;return u+(y?s.substr(0,y)+r.thousand:"")+s.substr(y).replace(/(\d{3})(?=\d)/g,"$1"+r.thousand)+(x?r.decimal+b(Math.abs(t),x).split(".")[1]:"")};var m=n.formatMoney=function(t,s,v,z,u,y){if(k(t)){return a(t,function(A){return m(A,s,v,z,u,y)})}t=i(t);var r=h((q(s)?s:{symbol:s,precision:v,thousand:z,decimal:u,format:y}),n.settings.currency),x=e(r.format),w=t>0?x.pos:t<0?x.neg:x.zero;return w.replace("%s",r.symbol).replace("%v",d(Math.abs(t),l(r.precision),r.thousand,r.decimal))};n.formatColumn=function(y,t,w,B,v,A){if(!y){return[]}var r=h((q(t)?t:{symbol:t,precision:w,thousand:B,decimal:v,format:A}),n.settings.currency),z=e(r.format),x=z.pos.indexOf("%s")<z.pos.indexOf("%v")?true:false,s=0,u=a(y,function(F,D){if(k(F)){return n.formatColumn(F,r)}else{F=i(F);var C=F>0?z.pos:F<0?z.neg:z.zero,E=C.replace("%s",r.symbol).replace("%v",d(Math.abs(F),l(r.precision),r.thousand,r.decimal));if(E.length>s){s=E.length}return E}});return a(u,function(D,C){if(c(D)&&D.length<s){return x?D.replace(r.symbol,r.symbol+(new Array(s-D.length+1).join(" "))):(new Array(s-D.length+1).join(" "))+D}return D})};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=n}exports.accounting=n}else{if(typeof define==="function"&&define.amd){define([],function(){return n})}else{n.noConflict=(function(r){return function(){o.accounting=r;n.noConflict=g;return n}})(o.accounting);o.accounting=n}}}(this));
(function(a){var b=function(f,d,c,g){this.$modal=f;this.$route=c;this.$callback=g;this.$trigger=d;var e=this;if(!c){return}d.on("click",function(h){h.preventDefault();a("body").modalmanager("loading");var i=e.$modal;a.getJSON(e.$route,function(j){if(j.content!==undefined){i.html(j.content)}e.$modal.modal();if(undefined!==e.$callback&&a.isFunction(e.$callback)){e.$callback.apply(e)}})})};a.fn.ajaxModal=function(e,c,f){var d=a(e);a(this).each(function(){var g=a(this);if(a.isFunction(c)&&f===undefined){this.callback=c;if(g.data("target")){this.route=g.data("target")}else{if(g.attr("href")){this.route=g.attr("href")}}}else{this.route=c;this.callback=f}return new b(d,g,this.route,this.callback)})}})(window.jQuery);
var bootbox=window.bootbox||function(i,b){function e(g,j){"undefined"===typeof j&&(j=a);return"string"===typeof f[j][g]?f[j][g]:j!=r?e(g,r):g}var a="en",r="en",q=!0,x="static",o="",d={},h={},c={setLocale:function(g){for(var j in f){if(j==g){a=g;return}}throw Error("Invalid locale: "+g)},addLocale:function(g,j){"undefined"===typeof f[g]&&(f[g]={});for(var k in j){f[g][k]=j[k]}},setIcons:function(g){h=g;if("object"!==typeof h||null===h){h={}}},setBtnClasses:function(g){d=g;if("object"!==typeof d||null===d){d={}}},alert:function(){var g="",j=e("OK"),k=null;switch(arguments.length){case 1:g=arguments[0];break;case 2:g=arguments[0];"function"==typeof arguments[1]?k=arguments[1]:j=arguments[1];break;case 3:g=arguments[0];j=arguments[1];k=arguments[2];break;default:throw Error("Incorrect number of arguments: expected 1-3")}return c.dialog(g,{label:j,icon:h.OK,"class":d.OK,callback:k},{onEscape:k||!0})},confirm:function(){var g="",j=e("CANCEL"),m=e("CONFIRM"),l=null;switch(arguments.length){case 1:g=arguments[0];break;case 2:g=arguments[0];"function"==typeof arguments[1]?l=arguments[1]:j=arguments[1];break;case 3:g=arguments[0];j=arguments[1];"function"==typeof arguments[2]?l=arguments[2]:m=arguments[2];break;case 4:g=arguments[0];j=arguments[1];m=arguments[2];l=arguments[3];break;default:throw Error("Incorrect number of arguments: expected 1-4")}var k=function(){if("function"===typeof l){return l(!1)}};return c.dialog(g,[{label:j,icon:h.CANCEL,"class":d.CANCEL,callback:k},{label:m,icon:h.CONFIRM,"class":d.CONFIRM,callback:function(){if("function"===typeof l){return l(!0)}}}],{onEscape:k})},prompt:function(){var g="",j=e("CANCEL"),p=e("CONFIRM"),m=null,k="";switch(arguments.length){case 1:g=arguments[0];break;case 2:g=arguments[0];"function"==typeof arguments[1]?m=arguments[1]:j=arguments[1];break;case 3:g=arguments[0];j=arguments[1];"function"==typeof arguments[2]?m=arguments[2]:p=arguments[2];break;case 4:g=arguments[0];j=arguments[1];p=arguments[2];m=arguments[3];break;case 5:g=arguments[0];j=arguments[1];p=arguments[2];m=arguments[3];k=arguments[4];break;default:throw Error("Incorrect number of arguments: expected 1-5")}var l=b("<form></form>");l.append("<input autocomplete=off type=text value='"+k+"' />");var k=function(){if("function"===typeof m){return m(null)}},n=c.dialog(l,[{label:j,icon:h.CANCEL,"class":d.CANCEL,callback:k},{label:p,icon:h.CONFIRM,"class":d.CONFIRM,callback:function(){if("function"===typeof m){return m(l.find("input[type=text]").val())}}}],{header:g,show:!1,onEscape:k});n.on("shown",function(){l.find("input[type=text]").focus();l.on("submit",function(s){s.preventDefault();n.find(".btn-primary").click()})});n.modal("show");return n},dialog:function(E,F,D){function B(){var g=null;"function"===typeof D.onEscape&&(g=D.onEscape());!1!==g&&A.modal("hide")}var y="",u=[];D||(D={});"undefined"===typeof F?F=[]:"undefined"==typeof F.length&&(F=[F]);for(var C=F.length;C--;){var z=null,v=null,w=null,t="",s=null;if("undefined"==typeof F[C].label&&"undefined"==typeof F[C]["class"]&&"undefined"==typeof F[C].callback){var z=0,v=null,n;for(n in F[C]){if(v=n,1<++z){break}}1==z&&"function"==typeof F[C][n]&&(F[C].label=v,F[C].callback=F[C][n])}"function"==typeof F[C].callback&&(s=F[C].callback);F[C]["class"]?w=F[C]["class"]:C==F.length-1&&2>=F.length&&(w="btn-primary");z=F[C].label?F[C].label:"Option "+(C+1);F[C].icon&&(t="<i class='"+F[C].icon+"'></i> ");v=F[C].href?F[C].href:"javascript:;";y="<a data-handler='"+C+"' class='btn "+w+"' href='"+v+"'>"+t+""+z+"</a>"+y;u[C]=s}C=["<div class='bootbox modal' tabindex='-1' style='overflow:hidden;'>"];if(D.header){w="";if("undefined"==typeof D.headerCloseButton||D.headerCloseButton){w="<a href='javascript:;' class='close'>&times;</a>"}C.push("<div class='modal-header'>"+w+"<h3>"+D.header+"</h3></div>")}C.push("<div class='modal-body'></div>");y&&C.push("<div class='modal-footer'>"+y+"</div>");C.push("</div>");var A=b(C.join("\n"));("undefined"===typeof D.animate?q:D.animate)&&A.addClass("fade");(y="undefined"===typeof D.classes?o:D.classes)&&A.addClass(y);A.find(".modal-body").html(E);A.on("keyup.dismiss.modal",function(g){27===g.which&&D.onEscape&&B("escape")});A.on("click","a.close",function(g){g.preventDefault();B("close")});A.on("shown",function(){A.find("a.btn-primary:first").focus()});A.on("hidden",function(){A.remove()});A.on("click",".modal-footer a",function(g){var l=b(this).data("handler"),k=u[l],j=null;"undefined"!==typeof l&&"undefined"!==typeof F[l].href||(g.preventDefault(),"function"===typeof k&&(j=k()),!1!==j&&A.modal("hide"))});b("body").append(A);A.modal({backdrop:"undefined"===typeof D.backdrop?x:D.backdrop,keyboard:!1,show:!1});A.on("show",function(){b(i).off("focusin.modal")});("undefined"===typeof D.show||!0===D.show)&&A.modal("show");return A},modal:function(){var g,j,l,k={onEscape:null,keyboard:!0,backdrop:x};switch(arguments.length){case 1:g=arguments[0];break;case 2:g=arguments[0];"object"==typeof arguments[1]?l=arguments[1]:j=arguments[1];break;case 3:g=arguments[0];j=arguments[1];l=arguments[2];break;default:throw Error("Incorrect number of arguments: expected 1-3")}k.header=j;l="object"==typeof l?b.extend(k,l):k;return c.dialog(g,[],l)},hideAll:function(){b(".bootbox").modal("hide")},animate:function(g){q=g},backdrop:function(g){x=g},classes:function(g){o=g}},f={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},ru:{OK:"OK",CANCEL:"\u041e\u0442\u043c\u0435\u043d\u0430",CONFIRM:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"}};return c}(document,window.jQuery);window.bootbox=bootbox;
!function(b){var a=function(d,c){this.init(d,c)};a.prototype={constructor:a,init:function(e,c){this.options=c;this.$element=b(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",b.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote);var d=typeof this.options.manager==="function"?this.options.manager.call(this):this.options.manager;d=d.appendModal?d:b(d).modalmanager().data("modalmanager");d.appendModal(this)},toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var c=b.Event("show");if(this.isShown){return}this.$element.trigger(c);if(c.isDefaultPrevented()){return}this.escape();this.tab();this.options.loading&&this.loading()},hide:function(c){c&&c.preventDefault();c=b.Event("hide");this.$element.trigger(c);if(!this.isShown||c.isDefaultPrevented()){return(this.isShown=false)}this.isShown=false;this.escape();this.tab();this.isLoading&&this.loading();b(document).off("focusin.modal");this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",true);b.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},layout:function(){var f=this.options.height?"height":"max-height",d=this.options.height||this.options.maxHeight;if(this.options.width){this.$element.css("width",this.options.width);var c=this;this.$element.css("margin-left",function(){if(/%/ig.test(c.options.width)){return -(parseInt(c.options.width)/2)+"%"}else{return -(b(this).width()/2)+"px"}})}else{this.$element.css("width","");this.$element.css("margin-left","")}this.$element.find(".modal-body").css("overflow","").css(f,"");if(d){this.$element.find(".modal-body").css("overflow","auto").css(f,d)}var e=b(window).height()-10<this.$element.height();if(e||this.options.modalOverflow){this.$element.css("margin-top",0).addClass("modal-overflow")}else{this.$element.css("margin-top",0-this.$element.height()/2).removeClass("modal-overflow")}},tab:function(){var c=this;if(this.isShown&&this.options.consumeTab){this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(g){if(g.keyCode&&g.keyCode==9){var d=b(this),f=b(this);c.$element.find("[data-tabindex]:enabled:not([readonly])").each(function(h){if(!h.shiftKey){d=d.data("tabindex")<b(this).data("tabindex")?d=b(this):f=b(this)}else{d=d.data("tabindex")>b(this).data("tabindex")?d=b(this):f=b(this)}});d[0]!==b(this)[0]?d.focus():f.focus();g.preventDefault()}})}else{if(!this.isShown){this.$element.off("keydown.tabindex.modal")}}},escape:function(){var c=this;if(this.isShown&&this.options.keyboard){if(!this.$element.attr("tabindex")){this.$element.attr("tabindex",-1)}this.$element.on("keyup.dismiss.modal",function(d){d.which==27&&c.hide()})}else{if(!this.isShown){this.$element.off("keyup.dismiss.modal")}}},hideWithTransition:function(){var c=this,d=setTimeout(function(){c.$element.off(b.support.transition.end);c.hideModal()},500);this.$element.one(b.support.transition.end,function(){clearTimeout(d);c.hideModal()})},hideModal:function(){var d=this.options.height?"height":"max-height";var c=this.options.height||this.options.maxHeight;if(c){this.$element.find(".modal-body").css("overflow","").css(d,"")}this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading.remove();this.$loading=null;this.isLoading=false},loading:function(f){f=f||function(){};var d=this.$element.hasClass("fade")?"fade":"";if(!this.isLoading){var c=b.support.transition&&d;this.$loading=b('<div class="loading-mask '+d+'">').append(this.options.spinner).appendTo(this.$element);if(c){this.$loading[0].offsetWidth}this.$loading.addClass("in");this.isLoading=true;c?this.$loading.one(b.support.transition.end,f):f()}else{if(this.isLoading&&this.$loading){this.$loading.removeClass("in");var e=this;b.support.transition&&this.$element.hasClass("fade")?this.$loading.one(b.support.transition.end,function(){e.removeLoading()}):e.removeLoading()}else{if(f){f(this.isLoading)}}}},focus:function(){var c=this.$element.find(this.options.focusOn);c=c.length?c:this.$element;c.focus()},attention:function(){if(this.options.attentionAnimation){this.$element.removeClass("animated").removeClass(this.options.attentionAnimation);var c=this;setTimeout(function(){c.$element.addClass("animated").addClass(c.options.attentionAnimation)},0)}this.focus()},destroy:function(){var c=b.Event("destroy");this.$element.trigger(c);if(c.isDefaultPrevented()){return}this.teardown()},teardown:function(){if(!this.$parent.length){this.$element.remove();this.$element=null;return}if(this.$parent!==this.$element.parent()){this.$element.appendTo(this.$parent)}this.$element.off(".modal");this.$element.removeData("modal");this.$element.removeClass("in").attr("aria-hidden",true)}};b.fn.modal=function(d,c){return this.each(function(){var g=b(this),f=g.data("modal"),e=b.extend({},b.fn.modal.defaults,g.data(),typeof d=="object"&&d);if(!f){g.data("modal",(f=new a(this,e)))}if(typeof d=="string"){f[d].apply(f,[].concat(c))}else{if(e.show){f.show()}}})};b.fn.modal.defaults={keyboard:true,backdrop:true,loading:false,show:true,width:null,height:null,maxHeight:null,modalOverflow:false,consumeTab:true,focusOn:null,replace:false,resize:false,attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>'};b.fn.modal.Constructor=a;b(function(){b(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(h){var g=b(this),d=g.attr("href"),c=b(g.attr("data-target")||(d&&d.replace(/.*(?=#[^\s]+$)/,""))),f=c.data("modal")?"toggle":b.extend({remote:!/#/.test(d)&&d},c.data(),g.data());h.preventDefault();c.modal(f).one("hide",function(){g.focus()})})})}(window.jQuery);
!function(c){var a=function(f,e){this.init(f,e)};a.prototype={constructor:a,init:function(f,e){this.$element=c(f);this.options=c.extend({},c.fn.modalmanager.defaults,this.$element.data(),typeof e=="object"&&e);this.stack=[];this.backdropCount=0;if(this.options.resize){var h,g=this;c(window).on("resize.modal",function(){h&&clearTimeout(h);h=setTimeout(function(){for(var j=0;j<g.stack.length;j++){g.stack[j].isShown&&g.stack[j].layout()}},10)})}},createModal:function(f,e){c(f).modal(c.extend({manager:this},e))},appendModal:function(f){this.stack.push(f);var e=this;f.$element.on("show.modalmanager",b(function(h){var g=function(){f.isShown=true;var i=c.support.transition&&f.$element.hasClass("fade");e.$element.toggleClass("modal-open",e.hasOpenModal()).toggleClass("page-overflow",c(window).height()<e.$element.height());f.$parent=f.$element.parent();f.$container=e.createContainer(f);f.$element.appendTo(f.$container);e.backdrop(f,function(){f.$element.show();if(i){f.$element[0].offsetWidth}f.layout();f.$element.addClass("in").attr("aria-hidden",false);var j=function(){e.setFocus();f.$element.trigger("shown")};i?f.$element.one(c.support.transition.end,j):j()})};f.options.replace?e.replace(g):g()}));f.$element.on("hidden.modalmanager",b(function(g){e.backdrop(f);if(f.$backdrop){c.support.transition&&f.$element.hasClass("fade")?f.$backdrop.one(c.support.transition.end,function(){e.destroyModal(f)}):e.destroyModal(f)}else{e.destroyModal(f)}}));f.$element.on("destroy.modalmanager",b(function(g){e.removeModal(f)}))},destroyModal:function(f){f.destroy();var e=this.hasOpenModal();this.$element.toggleClass("modal-open",e);if(!e){this.$element.removeClass("page-overflow")}this.removeContainer(f);this.setFocus()},hasOpenModal:function(){for(var e=0;e<this.stack.length;e++){if(this.stack[e].isShown){return true}}return false},setFocus:function(){var f;for(var e=0;e<this.stack.length;e++){if(this.stack[e].isShown){f=this.stack[e]}}if(!f){return}f.focus()},removeModal:function(e){e.$element.off(".modalmanager");if(e.$backdrop){this.removeBackdrop(e)}this.stack.splice(this.getIndexOfModal(e),1)},getModalAt:function(e){return this.stack[e]},getIndexOfModal:function(f){for(var e=0;e<this.stack.length;e++){if(f===this.stack[e]){return e}}},replace:function(g){var f;for(var e=0;e<this.stack.length;e++){if(this.stack[e].isShown){f=this.stack[e]}}if(f){this.$backdropHandle=f.$backdrop;f.$backdrop=null;g&&f.$element.one("hidden",b(c.proxy(g,this)));f.hide()}else{if(g){g()}}},removeBackdrop:function(e){e.$backdrop.remove();e.$backdrop=null},createBackdrop:function(f){var e;if(!this.$backdropHandle){e=c('<div class="modal-backdrop '+f+'" />').appendTo(this.$element)}else{e=this.$backdropHandle;e.off(".modalmanager");this.$backdropHandle=null;this.isLoading&&this.removeSpinner()}return e},removeContainer:function(e){e.$container.remove();e.$container=null},createContainer:function(e){var f;f=c('<div class="modal-scrollable">').css("z-index",d("modal",e?this.getIndexOfModal(e):this.stack.length)).appendTo(this.$element);if(e&&e.options.backdrop!="static"){f.on("click.modal",b(function(g){e.hide()}))}else{if(e){f.on("click.modal",b(function(g){e.attention()}))}}return f},backdrop:function(h,j){var f=h.$element.hasClass("fade")?"fade":"",i=h.options.backdrop&&this.backdropCount<this.options.backdropLimit;if(h.isShown&&i){var e=c.support.transition&&f&&!this.$backdropHandle;h.$backdrop=this.createBackdrop(f);h.$backdrop.css("z-index",d("backdrop",this.getIndexOfModal(h)));if(e){h.$backdrop[0].offsetWidth}h.$backdrop.addClass("in");this.backdropCount+=1;e?h.$backdrop.one(c.support.transition.end,j):j()}else{if(!h.isShown&&h.$backdrop){h.$backdrop.removeClass("in");this.backdropCount-=1;var g=this;c.support.transition&&h.$element.hasClass("fade")?h.$backdrop.one(c.support.transition.end,function(){g.removeBackdrop(h)}):g.removeBackdrop(h)}else{if(j){j()}}}},removeSpinner:function(){this.$spinner&&this.$spinner.remove();this.$spinner=null;this.isLoading=false},removeLoading:function(){this.$backdropHandle&&this.$backdropHandle.remove();this.$backdropHandle=null;this.removeSpinner()},loading:function(g){g=g||function(){};this.$element.toggleClass("modal-open",!this.isLoading||this.hasOpenModal()).toggleClass("page-overflow",c(window).height()<this.$element.height());if(!this.isLoading){this.$backdropHandle=this.createBackdrop("fade");this.$backdropHandle[0].offsetWidth;this.$backdropHandle.css("z-index",d("backdrop",this.stack.length)).addClass("in");var f=c(this.options.spinner).css("z-index",d("modal",this.stack.length)).appendTo(this.$element).addClass("in");this.$spinner=c(this.createContainer()).append(f).on("click.modalmanager",c.proxy(this.loading,this));this.isLoading=true;c.support.transition?this.$backdropHandle.one(c.support.transition.end,g):g()}else{if(this.isLoading&&this.$backdropHandle){this.$backdropHandle.removeClass("in");var e=this;c.support.transition?this.$backdropHandle.one(c.support.transition.end,function(){e.removeLoading()}):e.removeLoading()}else{if(g){g(this.isLoading)}}}}};var d=(function(){var f,e={};return function(g,j){if(typeof f==="undefined"){var i=c('<div class="modal hide" />').appendTo("body"),h=c('<div class="modal-backdrop hide" />').appendTo("body");e.modal=+i.css("z-index");e.backdrop=+h.css("z-index");f=e.modal-e.backdrop;i.remove();h.remove();h=i=null}return e[g]+(f*j)}}());function b(e){return function(f){if(this===f.target){return e.apply(this,arguments)}}}c.fn.modalmanager=function(f,e){return this.each(function(){var h=c(this),g=h.data("modalmanager");if(!g){h.data("modalmanager",(g=new a(this,f)))}if(typeof f==="string"){g[f].apply(g,[].concat(e))}})};c.fn.modalmanager.defaults={backdropLimit:999,resize:true,spinner:'<div class="loading-spinner fade" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>'};c.fn.modalmanager.Constructor=a}(jQuery);
(function(){var a;a=function(){function b(){this.options_index=0,this.parsed=[]}return b.prototype.add_node=function(c){return c.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(c):this.add_option(c)},b.prototype.add_group=function(h){var d,k,g,c,f,j;d=this.parsed.length,this.parsed.push({array_index:d,group:!0,label:h.label,children:0,disabled:h.disabled}),f=h.childNodes,j=[];for(g=0,c=f.length;g<c;g++){k=f[g],j.push(this.add_option(k,d,h.disabled))}return j},b.prototype.add_option=function(d,c,f){if(d.nodeName.toUpperCase()==="OPTION"){return d.text!==""?(c!=null&&(this.parsed[c].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:d.value,text:d.text,html:d.innerHTML,selected:d.selected,disabled:f===!0?f:d.disabled,group_array_index:c,classes:d.className,style:d.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1}},b}(),a.select_to_array=function(c){var g,e,b,d,f;e=new a,f=c.childNodes;for(b=0,d=f.length;b<d;b++){g=f[b],e.add_node(g)}return e.parsed},this.SelectParser=a}).call(this),function(){var b,a;a=this,b=function(){function c(f,d){this.form_field=f,this.options=d!=null?d:{},this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return c.prototype.set_default_values=function(){var d=this;return this.click_test_action=function(e){return d.test_active_click(e)},this.activate_action=function(e){return d.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:!0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||Infinity,this.inherit_select_classes=this.options.inherit_select_classes||!1},c.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},c.prototype.mouse_enter=function(){return this.mouse_on_container=!0},c.prototype.mouse_leave=function(){return this.mouse_on_container=!1},c.prototype.input_focus=function(f){var d=this;if(this.is_multiple){if(!this.active_field){return setTimeout(function(){return d.container_mousedown()},50)}}else{if(!this.active_field){return this.activate_field()}}},c.prototype.input_blur=function(f){var d=this;if(!this.mouse_on_container){return this.active_field=!1,setTimeout(function(){return d.blur_test()},100)}},c.prototype.result_add_option=function(f){var d,g;return f.disabled?"":(f.dom_id=this.container_id+"_o_"+f.array_index,d=f.selected&&this.is_multiple?[]:["active-result"],f.selected&&d.push("result-selected"),f.group_array_index!=null&&d.push("group-option"),f.classes!==""&&d.push(f.classes),g=f.style.cssText!==""?' style="'+f.style+'"':"",'<li id="'+f.dom_id+'" class="'+d.join(" ")+'"'+g+">"+f.html+"</li>")},c.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},c.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},c.prototype.results_search=function(d){return this.results_showing?this.winnow_results():this.results_show()},c.prototype.keyup_checker=function(f){var d,g;d=(g=f.which)!=null?g:f.keyCode,this.search_field_scale();switch(d){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0){return this.keydown_backstroke()}if(!this.pending_backstroke){return this.result_clear_highlight(),this.results_search()}break;case 13:f.preventDefault();if(this.results_showing){return this.result_select(f)}break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},c.prototype.generate_field_id=function(){var d;return d=this.generate_random_id(),this.form_field.id=d,d},c.prototype.generate_random_char=function(){var f,d,g;return f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",g=Math.floor(Math.random()*f.length),d=f.substring(g,g+1)},c}(),a.AbstractChosen=b}.call(this),function(){var f,b,g,d,a={}.hasOwnProperty,c=function(j,h){function i(){this.constructor=j}for(var k in h){a.call(h,k)&&(j[k]=h[k])}return i.prototype=h.prototype,j.prototype=new i,j.__super__=h.prototype,j};d=this,f=jQuery,f.fn.extend({chosen:function(k){var j,e,h;return h=navigator.userAgent.toLowerCase(),e=/(msie) ([\w.]+)/.exec(h)||[],j={name:e[1]||"",version:e[2]||"0"},j.name==="msie"&&(j.version==="6.0"||j.version==="7.0"&&document.documentMode===7)?this:this.each(function(m){var l;l=f(this);if(!l.hasClass("chzn-done")){return l.data("chosen",new b(this,k))}})}}),b=function(h){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,h),e.prototype.setup=function(){return this.form_field_jq=f(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},e.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},e.prototype.set_up_html=function(){var l,n,k,m,p,j;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",l=["chzn-container"],l.push("chzn-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&l.push(this.form_field.className),this.is_rtl&&l.push("chzn-rtl"),this.f_width=this.form_field_jq.outerWidth(),k={id:this.container_id,"class":l.join(" "),style:"width: "+this.f_width+"px;",title:this.form_field.title},n=f("<div />",k),this.is_multiple?n.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):n.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(n),this.container=f("#"+this.container_id),this.dropdown=this.container.find("div.chzn-drop").first(),m=this.container.height(),p=this.f_width-g(this.dropdown),this.dropdown.css({width:p+"px",top:m+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),j=p-g(this.search_container)-g(this.search_field),this.search_field.css({width:j+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},e.prototype.register_observers=function(){var i=this;return this.container.mousedown(function(j){return i.container_mousedown(j)}),this.container.mouseup(function(j){return i.container_mouseup(j)}),this.container.mouseenter(function(j){return i.mouse_enter(j)}),this.container.mouseleave(function(j){return i.mouse_leave(j)}),this.search_results.mouseup(function(j){return i.search_results_mouseup(j)}),this.search_results.mouseover(function(j){return i.search_results_mouseover(j)}),this.search_results.mouseout(function(j){return i.search_results_mouseout(j)}),this.form_field_jq.bind("liszt:updated",function(j){return i.results_update_field(j)}),this.form_field_jq.bind("liszt:activate",function(j){return i.activate_field(j)}),this.form_field_jq.bind("liszt:open",function(j){return i.container_mousedown(j)}),this.search_field.blur(function(j){return i.input_blur(j)}),this.search_field.keyup(function(j){return i.keyup_checker(j)}),this.search_field.keydown(function(j){return i.keydown_checker(j)}),this.search_field.focus(function(j){return i.input_focus(j)}),this.is_multiple?this.search_choices.click(function(j){return i.choices_click(j)}):this.container.click(function(j){return j.preventDefault()})},e.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled){return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()}this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1;if(!this.is_multiple){return this.selected_item.bind("focus",this.activate_action)}},e.prototype.container_mousedown=function(i){var j;if(!this.is_disabled){return j=i!=null?f(i.target).hasClass("search-choice-close"):!1,i&&i.type==="mousedown"&&!this.results_showing&&i.preventDefault(),!this.pending_destroy_click&&!j?(this.active_field?!this.is_multiple&&i&&(f(i.target)[0]===this.selected_item[0]||f(i.target).parents("a.chzn-single").length)&&(i.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),f(document).click(this.click_test_action),this.results_show()),this.activate_field()):this.pending_destroy_click=!1}},e.prototype.container_mouseup=function(i){if(i.target.nodeName==="ABBR"&&!this.is_disabled){return this.results_reset(i)}},e.prototype.blur_test=function(i){if(!this.active_field&&this.container.hasClass("chzn-container-active")){return this.close_field()}},e.prototype.close_field=function(){return f(document).unbind("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},e.prototype.activate_field=function(){return this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},e.prototype.test_active_click=function(i){return f(i.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},e.prototype.results_build=function(){var m,k,o,j,l;this.parsing=!0,this.results_data=d.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),m="",l=this.results_data;for(o=0,j=l.length;o<j;o++){k=l[o],k.group?m+=this.result_add_group(k):k.empty||(m+=this.result_add_option(k),k.selected&&this.is_multiple?this.choice_build(k):k.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(k.text),this.allow_single_deselect&&this.single_deselect_control_build()))}return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(m),this.parsing=!1},e.prototype.result_add_group=function(i){return i.disabled?"":(i.dom_id=this.container_id+"_g_"+i.array_index,'<li id="'+i.dom_id+'" class="group-result">'+f("<div />").text(i.label).html()+"</li>")},e.prototype.result_do_highlight=function(o){var k,p,m,j,l;if(o.length){this.result_clear_highlight(),this.result_highlight=o,this.result_highlight.addClass("highlighted"),m=parseInt(this.search_results.css("maxHeight"),10),l=this.search_results.scrollTop(),j=m+l,p=this.result_highlight.position().top+this.search_results.scrollTop(),k=p+this.result_highlight.outerHeight();if(k>=j){return this.search_results.scrollTop(k-m>0?k-m:0)}if(p<l){return this.search_results.scrollTop(p)}}},e.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},e.prototype.results_show=function(){var i;if(!this.is_multiple){this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected)}else{if(this.max_selected_options<=this.choices){return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}}return i=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:i+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},e.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},e.prototype.set_tab_index=function(j){var i;if(this.form_field_jq.attr("tabindex")){return i=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",i)}},e.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},e.prototype.search_results_mouseup=function(i){var j;j=f(i.target).hasClass("active-result")?f(i.target):f(i.target).parents(".active-result").first();if(j.length){return this.result_highlight=j,this.result_select(i),this.search_field.focus()}},e.prototype.search_results_mouseover=function(i){var j;j=f(i.target).hasClass("active-result")?f(i.target):f(i.target).parents(".active-result").first();if(j){return this.result_do_highlight(j)}},e.prototype.search_results_mouseout=function(i){if(f(i.target).hasClass("active-result")){return this.result_clear_highlight()}},e.prototype.choices_click=function(i){i.preventDefault();if(this.active_field&&!f(i.target).hasClass("search-choice")&&!this.results_showing){return this.results_show()}},e.prototype.choice_build=function(k){var o,m,j,l=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(o=this.container_id+"_c_"+k.array_index,this.choices+=1,k.disabled?m='<li class="search-choice search-choice-disabled" id="'+o+'"><span>'+k.html+"</span></li>":m='<li class="search-choice" id="'+o+'"><span>'+k.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+k.array_index+'"></a></li>',this.search_container.before(m),j=f("#"+o).find("a").first(),j.click(function(i){return l.choice_destroy_link_click(i)}))},e.prototype.choice_destroy_link_click=function(i){return i.preventDefault(),this.is_disabled?i.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(f(i.target)))},e.prototype.choice_destroy=function(i){if(this.result_deselect(i.attr("rel"))){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),i.parents("li").first().remove(),this.search_field_scale()}},e.prototype.results_reset=function(){this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change");if(this.active_field){return this.results_hide()}},e.prototype.results_reset_cleanup=function(){return this.current_value=this.form_field_jq.val(),this.selected_item.find("abbr").remove()},e.prototype.result_select=function(m){var k,o,l,j;if(this.result_highlight){return k=this.result_highlight,o=k.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(k):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=k,this.selected_item.removeClass("chzn-default")),k.addClass("result-selected"),j=o.substr(o.lastIndexOf("_")+1),l=this.results_data[j],l.selected=!0,this.form_field.options[l.options_index].selected=!0,this.is_multiple?this.choice_build(l):(this.selected_item.find("span").first().text(l.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!m.metaKey&&!m.ctrlKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[l.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()}},e.prototype.result_activate=function(i){return i.addClass("active-result")},e.prototype.result_deactivate=function(i){return i.removeClass("active-result")},e.prototype.result_deselect=function(i){var k,j;return j=this.results_data[i],this.form_field.options[j.options_index].disabled?!1:(j.selected=!1,this.form_field.options[j.options_index].selected=!1,k=f("#"+this.container_id+"_o_"+i),k.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[j.options_index].value}),this.search_field_scale(),!0)},e.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1){return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')}},e.prototype.winnow_results=function(){var w,C,z,F,x,B,q,L,I,E,K,G,A,J,k,D,H,j;this.no_results_clear(),I=0,E=this.search_field.val()===this.default_text?"":f("<div/>").text(f.trim(this.search_field.val())).html(),B=this.search_contains?"":"^",x=new RegExp(B+E.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),A=new RegExp(E.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),j=this.results_data;for(J=0,D=j.length;J<D;J++){C=j[J];if(!C.disabled&&!C.empty){if(C.group){f("#"+C.dom_id).css("display","none")}else{if(!this.is_multiple||!C.selected){w=!1,L=C.dom_id,q=f("#"+L);if(x.test(C.html)){w=!0,I+=1}else{if(this.enable_split_word_search&&(C.html.indexOf(" ")>=0||C.html.indexOf("[")===0)){F=C.html.replace(/\[|\]/g,"").split(" ");if(F.length){for(k=0,H=F.length;k<H;k++){z=F[k],x.test(z)&&(w=!0,I+=1)}}}}w?(E.length?(K=C.html.search(A),G=C.html.substr(0,K+E.length)+"</em>"+C.html.substr(K+E.length),G=G.substr(0,K)+"<em>"+G.substr(K)):G=C.html,q.html(G),this.result_activate(q),C.group_array_index!=null&&f("#"+this.results_data[C.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&L===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(q))}}}}return I<1&&E.length?this.no_results(E):this.winnow_results_set_highlight()},e.prototype.winnow_results_clear=function(){var k,o,m,j,l;this.search_field.val(""),o=this.search_results.find("li"),l=[];for(m=0,j=o.length;m<j;m++){k=o[m],k=f(k),k.hasClass("group-result")?l.push(k.css("display","auto")):!this.is_multiple||!k.hasClass("result-selected")?l.push(this.result_activate(k)):l.push(void 0)}return l},e.prototype.winnow_results_set_highlight=function(){var j,i;if(!this.result_highlight){i=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),j=i.length?i.first():this.search_results.find(".active-result").first();if(j!=null){return this.result_do_highlight(j)}}},e.prototype.no_results=function(i){var j;return j=f('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),j.find("span").first().html(i),this.search_results.append(j)},e.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},e.prototype.keydown_arrow=function(){var i,j;this.result_highlight?this.results_showing&&(j=this.result_highlight.nextAll("li.active-result").first(),j&&this.result_do_highlight(j)):(i=this.search_results.find("li.active-result").first(),i&&this.result_do_highlight(f(i)));if(!this.results_showing){return this.results_show()}},e.prototype.keyup_arrow=function(){var i;if(!this.results_showing&&!this.is_multiple){return this.results_show()}if(this.result_highlight){return i=this.result_highlight.prevAll("li.active-result"),i.length?this.result_do_highlight(i.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())}},e.prototype.keydown_backstroke=function(){var i;if(this.pending_backstroke){return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()}i=this.search_container.siblings("li.search-choice").last();if(i.length&&!i.hasClass("search-choice-disabled")){return this.pending_backstroke=i,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")}},e.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},e.prototype.keydown_checker=function(j){var i,k;i=(k=j.which)!=null?k:j.keyCode,this.search_field_scale(),i!==8&&this.pending_backstroke&&this.clear_backstroke();switch(i){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(j),this.mouse_on_container=!1;break;case 13:j.preventDefault();break;case 38:j.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},e.prototype.search_field_scale=function(){var w,l,j,m,x,k,v,q,p;if(this.is_multiple){j=0,v=0,x="position:absolute; left: -1000px; top: -1000px; display:none;",k=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(q=0,p=k.length;q<p;q++){m=k[q],x+=m+":"+this.search_field.css(m)+";"}return l=f("<div />",{style:x}),l.text(this.search_field.val()),f("body").append(l),v=l.width()+25,l.remove(),v>this.f_width-10&&(v=this.f_width-10),this.search_field.css({width:v+"px"}),w=this.container.height(),this.dropdown.css({top:w+"px"})}},e.prototype.generate_random_id=function(){var i;i="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();while(f("#"+i).length>0){i+=this.generate_random_char()}return i},e}(AbstractChosen),d.Chosen=b,g=function(i){var h;return h=i.outerWidth()-i.width()},d.get_side_border_padding=g}.call(this);
(function(a){a.fn.dropdownSelect=function(c){var d={groupSelector:".btn-group",dropdownSelector:".dropdown-menu a",listElement:"li",valueData:"value",buttonElement:"button span:first-child",input:false,value:0};var b=a.extend(d,c);a(this).each(function(){var f=a(this).siblings(b.groupSelector);if(0!==b.value){var e=a(b.dropdownSelector,f).filter(function(){return a(this).closest(b.listElement).data("value")==b.value});if(undefined!==e){a(b.buttonElement,f).html(e.html())}}a(f).on("click",b.dropdownSelector,function(g){g.preventDefault();var i=a(this),h=a(this).parents(b.listElement).data(b.valueData);a(b.buttonElement,f).html(i.html());if(b.input){a(b.input).val(h)}})})}})(window.jQuery);
(function(e,h,a){var g=window.ExposeTranslation||{get:function(i){return i}};var d=h.View.extend({tagName:"div",className:"content",icon:'<i class="icon-plus-sign"></i>',addlink:a.template('<a href="#" class="add_form_collection_link"><%= icon %> <%= label %></a>'),legend:a.template('<h<%= heading %> class="collection-heading"><%= label %> <%= counter %></h<%= heading %>>'),counter:0,heading:2,initialize:function(){this.render()},render:function(){var j=this,k=e(this.createAddLink()).on("click",function(l){l.preventDefault();j.addForm(j,this)});this.$el.before(k);if(this.$el.find("fieldset:first").children().length>0){var i={heading:3,label:j.options.label,counter:++j.counter};this.$el.find("fieldset:first").prepend(j.legend(i))}return this},createAddLink:function(){return this.addlink({icon:this.icon,label:g.get("Add")+" "+this.options.label})},addForm:function(n,m){var q=this.$el.hasClass("child")?e(".content",this.$el).length:0;q+=this.$el.siblings(".child").length;var r=this.$el.attr("data-prototype"),j=e(r.replace(/__name__/g,q)),s=this.$el.parents(".form-collection").length,u=this.heading+(s===2?3:s);j.find("fieldset:first").prepend(this.legend({heading:u,label:this.options.label,counter:++this.counter}));var i=e("<div />").addClass("child");if(s!==2){i.addClass("well")}i.append(j);var p=new f({el:i}),k=p.render().el;e(m).before(k);var t=e(k).find(".form-collection").siblings("legend"),o=e("<h"+(u+1)+" />").html(t.children().first().html());t.html(o);return p}});var f=h.View.extend({template:a.template('<a class="pull-right remove-form" href="#"><%= icon %> <%=label%></a>'),icon:'<i class="icon-remove"></i> ',render:function(){var k=this,j=this.template({icon:this.icon,label:g.get("delete")}),i=e(j).on("click",function(l){l.preventDefault();k.destroy(k)});this.$el.prepend(i);return this},destroy:function(i){i.$el.remove();return this}});function c(k,n){var m={},l="",i="",j="";i=k.toString();if(false===(m=b("HTML_ENTITIES",n))){return false}delete (m["&"]);m["&"]="&amp;";for(l in m){j=m[l];i=i.split(j).join(l)}i=i.split("&#039;").join("'");return i}function b(p,n){var k={},m={},j;var l={},i={};var q={},o={};l[0]="HTML_SPECIALCHARS";l[1]="HTML_ENTITIES";i[0]="ENT_NOQUOTES";i[2]="ENT_COMPAT";i[3]="ENT_QUOTES";q=!isNaN(p)?l[p]:p?p.toUpperCase():"HTML_SPECIALCHARS";o=!isNaN(n)?i[n]:n?n.toUpperCase():"ENT_COMPAT";if(q!=="HTML_SPECIALCHARS"&&q!=="HTML_ENTITIES"){throw new Error("Table: "+q+" not supported")}k["38"]="&amp;";if(q==="HTML_ENTITIES"){k["160"]="&nbsp;";k["161"]="&iexcl;";k["162"]="&cent;";k["163"]="&pound;";k["164"]="&curren;";k["165"]="&yen;";k["166"]="&brvbar;";k["167"]="&sect;";k["168"]="&uml;";k["169"]="&copy;";k["170"]="&ordf;";k["171"]="&laquo;";k["172"]="&not;";k["173"]="&shy;";k["174"]="&reg;";k["175"]="&macr;";k["176"]="&deg;";k["177"]="&plusmn;";k["178"]="&sup2;";k["179"]="&sup3;";k["180"]="&acute;";k["181"]="&micro;";k["182"]="&para;";k["183"]="&middot;";k["184"]="&cedil;";k["185"]="&sup1;";k["186"]="&ordm;";k["187"]="&raquo;";k["188"]="&frac14;";k["189"]="&frac12;";k["190"]="&frac34;";k["191"]="&iquest;";k["192"]="&Agrave;";k["193"]="&Aacute;";k["194"]="&Acirc;";k["195"]="&Atilde;";k["196"]="&Auml;";k["197"]="&Aring;";k["198"]="&AElig;";k["199"]="&Ccedil;";k["200"]="&Egrave;";k["201"]="&Eacute;";k["202"]="&Ecirc;";k["203"]="&Euml;";k["204"]="&Igrave;";k["205"]="&Iacute;";k["206"]="&Icirc;";k["207"]="&Iuml;";k["208"]="&ETH;";k["209"]="&Ntilde;";k["210"]="&Ograve;";k["211"]="&Oacute;";k["212"]="&Ocirc;";k["213"]="&Otilde;";k["214"]="&Ouml;";k["215"]="&times;";k["216"]="&Oslash;";k["217"]="&Ugrave;";k["218"]="&Uacute;";k["219"]="&Ucirc;";k["220"]="&Uuml;";k["221"]="&Yacute;";k["222"]="&THORN;";k["223"]="&szlig;";k["224"]="&agrave;";k["225"]="&aacute;";k["226"]="&acirc;";k["227"]="&atilde;";k["228"]="&auml;";k["229"]="&aring;";k["230"]="&aelig;";k["231"]="&ccedil;";k["232"]="&egrave;";k["233"]="&eacute;";k["234"]="&ecirc;";k["235"]="&euml;";k["236"]="&igrave;";k["237"]="&iacute;";k["238"]="&icirc;";k["239"]="&iuml;";k["240"]="&eth;";k["241"]="&ntilde;";k["242"]="&ograve;";k["243"]="&oacute;";k["244"]="&ocirc;";k["245"]="&otilde;";k["246"]="&ouml;";k["247"]="&divide;";k["248"]="&oslash;";k["249"]="&ugrave;";k["250"]="&uacute;";k["251"]="&ucirc;";k["252"]="&uuml;";k["253"]="&yacute;";k["254"]="&thorn;";k["255"]="&yuml;"}if(o!=="ENT_NOQUOTES"){k["34"]="&quot;"}if(o==="ENT_QUOTES"){k["39"]="&#39;"}k["60"]="&lt;";k["62"]="&gt;";for(j in k){if(k.hasOwnProperty(j)){m[String.fromCharCode(j)]=k[j]}}return m}e.fn.formCollection=function(i){e(this).each(function(){var j=new d(e.extend({el:this},i))});return this}})(window.jQuery,Backbone,_);
var swfobject=function(){var l="undefined",T="object",A="Shockwave Flash",e="ShockwaveFlash.ShockwaveFlash",S="application/x-shockwave-flash",z="SWFObjectExprInst",f="onreadystatechange",w=window,L=document,V=navigator,B=false,a=[J],Q=[],v=[],q=[],N,y,m,j,r=false,C=false,P,o,O=true,u=function(){var ah=typeof L.getElementById!=l&&typeof L.getElementsByTagName!=l&&typeof L.createElement!=l,ad=V.userAgent.toLowerCase(),af=V.platform.toLowerCase(),aa=af?/win/.test(af):/win/.test(ad),Y=af?/mac/.test(af):/mac/.test(ad),ab=/webkit/.test(ad)?parseFloat(ad.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ae=!+"\v1",ac=[0,0,0],X=null;if(typeof V.plugins!=l&&typeof V.plugins[A]==T){X=V.plugins[A].description;if(X&&!(typeof V.mimeTypes!=l&&V.mimeTypes[S]&&!V.mimeTypes[S].enabledPlugin)){B=true;ae=false;X=X.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ac[0]=parseInt(X.replace(/^(.*)\..*$/,"$1"),10);ac[1]=parseInt(X.replace(/^.*\.(.*)\s.*$/,"$1"),10);ac[2]=/[a-zA-Z]/.test(X)?parseInt(X.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof w.ActiveXObject!=l){try{var Z=new ActiveXObject(e);if(Z){X=Z.GetVariable("$version");if(X){ae=true;X=X.split(" ")[1].split(",");ac=[parseInt(X[0],10),parseInt(X[1],10),parseInt(X[2],10)]}}}catch(ag){}}}return{w3:ah,pv:ac,wk:ab,ie:ae,win:aa,mac:Y}}(),M=function(){if(!u.w3){return}if((typeof L.readyState!=l&&L.readyState=="complete")||(typeof L.readyState==l&&(L.getElementsByTagName("body")[0]||L.body))){H()}if(!r){if(typeof L.addEventListener!=l){L.addEventListener("DOMContentLoaded",H,false)}if(u.ie&&u.win){L.attachEvent(f,function(){if(L.readyState=="complete"){L.detachEvent(f,arguments.callee);H()}});if(w==top){(function(){if(r){return}try{L.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}H()})()}}if(u.wk){(function(){if(r){return}if(!/loaded|complete/.test(L.readyState)){setTimeout(arguments.callee,0);return}H()})()}U(H)}}();function H(){if(r){return}try{var X=L.getElementsByTagName("body")[0].appendChild(k("span"));X.parentNode.removeChild(X)}catch(Y){return}r=true;var Z=a.length;for(var aa=0;aa<Z;aa++){a[aa]()}}function s(X){if(r){X()}else{a[a.length]=X}}function U(Y){if(typeof w.addEventListener!=l){w.addEventListener("load",Y,false)}else{if(typeof L.addEventListener!=l){L.addEventListener("load",Y,false)}else{if(typeof w.attachEvent!=l){K(w,"onload",Y)}else{if(typeof w.onload=="function"){var X=w.onload;w.onload=function(){X();Y()}}else{w.onload=Y}}}}}function J(){if(B){c()}else{p()}}function c(){var Z=L.getElementsByTagName("body")[0];var X=k(T);X.setAttribute("type",S);var Y=Z.appendChild(X);if(Y){var aa=0;(function(){if(typeof Y.GetVariable!=l){var ab=Y.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");u.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(aa<10){aa++;setTimeout(arguments.callee,10);return}}Z.removeChild(X);Y=null;p()})()}else{p()}}function p(){var ac=Q.length;if(ac>0){for(var ab=0;ab<ac;ab++){var ag=Q[ab].id;var X=Q[ab].callbackFn;var ai={success:false,id:ag};if(u.pv[0]>0){var aa=E(ag);if(aa){if(n(Q[ab].swfVersion)&&!(u.wk&&u.wk<312)){d(ag,true);if(X){ai.success=true;ai.ref=h(ag);X(ai)}}else{if(Q[ab].expressInstall&&i()){var ae={};ae.data=Q[ab].expressInstall;ae.width=aa.getAttribute("width")||"0";ae.height=aa.getAttribute("height")||"0";if(aa.getAttribute("class")){ae.styleclass=aa.getAttribute("class")}if(aa.getAttribute("align")){ae.align=aa.getAttribute("align")}var ad={};var af=aa.getElementsByTagName("param");var Y=af.length;for(var Z=0;Z<Y;Z++){if(af[Z].getAttribute("name").toLowerCase()!="movie"){ad[af[Z].getAttribute("name")]=af[Z].getAttribute("value")}}x(ae,ad,ag,X)}else{R(aa);if(X){X(ai)}}}}}else{d(ag,true);if(X){var ah=h(ag);if(ah&&typeof ah.SetVariable!=l){ai.success=true;ai.ref=ah}X(ai)}}}}}function h(X){var Z=null;var aa=E(X);if(aa&&aa.nodeName=="OBJECT"){if(typeof aa.SetVariable!=l){Z=aa}else{var Y=aa.getElementsByTagName(T)[0];if(Y){Z=Y}}}return Z}function i(){return !C&&n("6.0.65")&&(u.win||u.mac)&&!(u.wk&&u.wk<312)}function x(ab,ad,Z,ac){C=true;m=ac||null;j={success:false,id:Z};var Y=E(Z);if(Y){if(Y.nodeName=="OBJECT"){N=I(Y);y=null}else{N=Y;y=Z}ab.id=z;if(typeof ab.width==l||(!/%$/.test(ab.width)&&parseInt(ab.width,10)<310)){ab.width="310"}if(typeof ab.height==l||(!/%$/.test(ab.height)&&parseInt(ab.height,10)<137)){ab.height="137"}L.title=L.title.slice(0,47)+" - Flash Player Installation";var X=u.ie&&u.win?"ActiveX":"PlugIn",ae="MMredirectURL="+w.location.toString().replace(/&/g,"%26")+"&MMplayerType="+X+"&MMdoctitle="+L.title;if(typeof ad.flashvars!=l){ad.flashvars+="&"+ae}else{ad.flashvars=ae}if(u.ie&&u.win&&Y.readyState!=4){var aa=k("div");Z+="SWFObjectNew";aa.setAttribute("id",Z);Y.parentNode.insertBefore(aa,Y);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}W(ab,ad,Z)}}function R(Y){if(u.ie&&u.win&&Y.readyState!=4){var X=k("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(I(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(I(Y),Y)}}function I(X){var ab=k("div");if(u.win&&u.ie){ab.innerHTML=X.innerHTML}else{var aa=X.getElementsByTagName(T)[0];if(aa){var Y=aa.childNodes;if(Y){var Z=Y.length;for(var ac=0;ac<Z;ac++){if(!(Y[ac].nodeType==1&&Y[ac].nodeName=="PARAM")&&!(Y[ac].nodeType==8)){ab.appendChild(Y[ac].cloneNode(true))}}}}}return ab}function W(ae,ac,ag){var af,ai=E(ag);if(u.wk&&u.wk<312){return af}if(ai){if(typeof ae.id==l){ae.id=ag}if(u.ie&&u.win){var ad="";for(var aa in ae){if(ae[aa]!=Object.prototype[aa]){if(aa.toLowerCase()=="data"){ac.movie=ae[aa]}else{if(aa.toLowerCase()=="styleclass"){ad+=' class="'+ae[aa]+'"'}else{if(aa.toLowerCase()!="classid"){ad+=" "+aa+'="'+ae[aa]+'"'}}}}}var ab="";for(var Z in ac){if(ac[Z]!=Object.prototype[Z]){ab+='<param name="'+Z+'" value="'+ac[Z]+'" />'}}ai.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ad+">"+ab+"</object>";v[v.length]=ae.id;af=E(ae.id)}else{var ah=k(T);ah.setAttribute("type",S);for(var Y in ae){if(ae[Y]!=Object.prototype[Y]){if(Y.toLowerCase()=="styleclass"){ah.setAttribute("class",ae[Y])}else{if(Y.toLowerCase()!="classid"){ah.setAttribute(Y,ae[Y])}}}}for(var X in ac){if(ac[X]!=Object.prototype[X]&&X.toLowerCase()!="movie"){G(ah,X,ac[X])}}ai.parentNode.replaceChild(ah,ai);af=ah}}return af}function G(X,Z,aa){var Y=k("param");Y.setAttribute("name",Z);Y.setAttribute("value",aa);X.appendChild(Y)}function g(Y){var X=E(Y);if(X&&X.nodeName=="OBJECT"){if(u.ie&&u.win){X.style.display="none";(function(){if(X.readyState==4){D(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function D(Y){var X=E(Y);if(X){for(var Z in X){if(typeof X[Z]=="function"){X[Z]=null}}X.parentNode.removeChild(X)}}function E(Y){var Z=null;try{Z=L.getElementById(Y)}catch(X){}return Z}function k(X){return L.createElement(X)}function K(Y,Z,X){Y.attachEvent(Z,X);q[q.length]=[Y,Z,X]}function n(Y){var X=u.pv,Z=Y.split(".");Z[0]=parseInt(Z[0],10);Z[1]=parseInt(Z[1],10)||0;Z[2]=parseInt(Z[2],10)||0;return(X[0]>Z[0]||(X[0]==Z[0]&&X[1]>Z[1])||(X[0]==Z[0]&&X[1]==Z[1]&&X[2]>=Z[2]))?true:false}function b(X,aa,Y,ad){if(u.ie&&u.mac){return}var ab=L.getElementsByTagName("head")[0];if(!ab){return}var Z=(Y&&typeof Y=="string")?Y:"screen";if(ad){P=null;o=null}if(!P||o!=Z){var ac=k("style");ac.setAttribute("type","text/css");ac.setAttribute("media",Z);P=ab.appendChild(ac);if(u.ie&&u.win&&typeof L.styleSheets!=l&&L.styleSheets.length>0){P=L.styleSheets[L.styleSheets.length-1]}o=Z}if(u.ie&&u.win){if(P&&typeof P.addRule==T){P.addRule(X,aa)}}else{if(P&&typeof L.createTextNode!=l){P.appendChild(L.createTextNode(X+" {"+aa+"}"))}}}function d(Y,Z){if(!O){return}var X=Z?"visible":"hidden";if(r&&E(Y)){E(Y).style.visibility=X}else{b("#"+Y,"visibility:"+X)}}function t(X){var Y=/[\\\"<>\.;]/;var Z=Y.exec(X)!=null;return Z&&typeof encodeURIComponent!=l?encodeURIComponent(X):X}var F=function(){if(u.ie&&u.win){window.attachEvent("onunload",function(){var Y=q.length;for(var X=0;X<Y;X++){q[X][0].detachEvent(q[X][1],q[X][2])}var ab=v.length;for(var ac=0;ac<ab;ac++){g(v[ac])}for(var aa in u){u[aa]=null}u=null;for(var Z in swfobject){swfobject[Z]=null}swfobject=null})}}();return{registerObject:function(Y,Z,ab,X){if(u.w3&&Y&&Z){var aa={};aa.id=Y;aa.swfVersion=Z;aa.expressInstall=ab;aa.callbackFn=X;Q[Q.length]=aa;d(Y,false)}else{if(X){X({success:false,id:Y})}}},getObjectById:function(X){if(u.w3){return h(X)}},embedSWF:function(X,ad,aa,ac,af,ah,ag,Z,ab,Y){var ae={success:false,id:ad};if(u.w3&&!(u.wk&&u.wk<312)&&X&&ad&&aa&&ac&&af){d(ad,false);s(function(){aa+="";ac+="";var ak={};if(ab&&typeof ab===T){for(var am in ab){ak[am]=ab[am]}}ak.data=X;ak.width=aa;ak.height=ac;var an={};if(Z&&typeof Z===T){for(var al in Z){an[al]=Z[al]}}if(ag&&typeof ag===T){for(var aj in ag){if(typeof an.flashvars!=l){an.flashvars+="&"+aj+"="+ag[aj]}else{an.flashvars=aj+"="+ag[aj]}}}if(n(af)){var ai=W(ak,an,ad);if(ak.id==ad){d(ad,true)}ae.success=true;ae.ref=ai}else{if(ah&&i()){ak.data=ah;x(ak,an,ad,Y);return}else{d(ad,true)}}if(Y){Y(ae)}})}else{if(Y){Y(ae)}}},switchOffAutoHideShow:function(){O=false},ua:u,getFlashPlayerVersion:function(){return{major:u.pv[0],minor:u.pv[1],release:u.pv[2]}},hasFlashPlayerVersion:n,createSWF:function(Y,X,Z){if(u.w3){return W(Y,X,Z)}else{return undefined}},showExpressInstall:function(X,Y,Z,aa){if(u.w3&&i()){x(X,Y,Z,aa)}},removeSWF:function(X){if(u.w3){g(X)}},createCSS:function(X,Y,aa,Z){if(u.w3){b(X,Y,aa,Z)}},addDomLoadEvent:s,addLoadEvent:U,getQueryParamValue:function(X){var Y=L.location.search||L.location.hash;if(Y){if(/\?/.test(Y)){Y=Y.split("?")[1]}if(X==null){return t(Y)}var aa=Y.split("&");for(var Z=0;Z<aa.length;Z++){if(aa[Z].substring(0,aa[Z].indexOf("="))==X){return t(aa[Z].substring((aa[Z].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(C){var X=E(z);if(X&&N){X.parentNode.replaceChild(N,X);if(y){d(y,true);if(u.ie&&u.win){N.style.display="block"}}if(m){m(j)}}C=false}}}}();var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(a){this.initSWFUpload(a)}}SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={};this.settings=b;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(a){delete SWFUpload.instances[this.movieName];throw a}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(b){if(typeof(b)!=="string"||b.match(/^https?:\/\//i)||b.match(/^\//)){return b}var a=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var c=window.location.pathname.lastIndexOf("/");if(c<=0){path="/"}else{path=window.location.pathname.substr(0,c)+"/"}return path+b};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(b,a){this.settings[b]=(this.settings[b]==undefined)?a:this.settings[b]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var a,b;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(a==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}b=document.createElement("div");b.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(b.firstChild,a);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var b=this.buildParamString();var a=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(a),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var a=this.settings.post_params;var c=[];if(typeof(a)==="object"){for(var b in a){if(a.hasOwnProperty(b)){c.push(encodeURIComponent(b.toString())+"="+encodeURIComponent(a[b].toString()))}}}return c.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var d=null;d=this.getMovieElement();if(d&&typeof(d.CallFunction)==="unknown"){for(var a in d){try{if(typeof(d[a])==="function"){d[a]=null}}catch(c){}}try{d.parentNode.removeChild(d)}catch(e){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(b){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(c,a,b){if(a==undefined){return(this.settings[c]=b)}else{return(this.settings[c]=a)}};SWFUpload.prototype.getSetting=function(a){if(this.settings[a]!=undefined){return this.settings[a]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.cancelUpload=function(a,b){if(b!==false){b=true}this.callFlash("CancelUpload",[a,b])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};SWFUpload.prototype.getFile=function(a){if(typeof(a)==="number"){return this.callFlash("GetFileByIndex",[a])}else{return this.callFlash("GetFile",[a])}};SWFUpload.prototype.addFileParam=function(b,c,a){return this.callFlash("AddFileParam",[b,c,a])};SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};SWFUpload.prototype.setHTTPSuccess=function(a){if(typeof a==="string"){a=a.replace(" ","").split(",")}this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};SWFUpload.prototype.setButtonImageURL=function(a){if(a==undefined){a=""}this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(a,b){this.settings.button_width=a;this.settings.button_height=b;var c=this.getMovieElement();if(c!=undefined){c.style.width=a+"px";c.style.height=b+"px"}this.callFlash("SetButtonDimensions",[a,b])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};SWFUpload.prototype.setButtonTextPadding=function(b,a){this.settings.button_text_top_padding=a;this.settings.button_text_left_padding=b;this.callFlash("SetButtonTextPadding",[b,a])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};SWFUpload.prototype.queueEvent=function(c,a){if(a==undefined){a=[]}else{if(!(a instanceof Array)){a=[a]}}var b=this;if(typeof this.settings[c]==="function"){this.eventQueue.push(function(){this.settings[c].apply(this,a)});setTimeout(function(){b.executeNextEvent()},0)}else{if(this.settings[c]!==null){throw"Event handler "+c+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;if(typeof(a)==="function"){a.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(a){var c=/[$]([0-9a-f]{4})/i;var d={};var b;if(a!=undefined){for(var e in a.post){if(a.post.hasOwnProperty(e)){b=e;var f;while((f=c.exec(b))!==null){b=b.replace(f[0],String.fromCharCode(parseInt("0x"+f[1],16)))}d[b]=a.post[e]}}a.post=d}return a};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return false}};SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();if(!a){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(a);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(c){try{if(this.movieElement&&typeof(c.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var a in c){try{if(typeof(c[a])==="function"){c[a]=null}}catch(d){}}}}catch(b){}window.__flash__removeCallback=function(g,e){try{if(g){g[e]=null}}catch(f){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileQueueError=function(b,a,c){b=this.unescapeFilePostParams(b);this.queueEvent("file_queue_error_handler",[b,a,c])};SWFUpload.prototype.fileDialogComplete=function(c,a,b){this.queueEvent("file_dialog_complete_handler",[c,a,b])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};SWFUpload.prototype.returnUploadStart=function(a){var b;if(typeof this.settings.upload_start_handler==="function"){a=this.unescapeFilePostParams(a);b=this.settings.upload_start_handler.call(this,a)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(b===undefined){b=true}b=!!b;this.callFlash("ReturnUploadStart",[b])};SWFUpload.prototype.uploadProgress=function(b,a,c){b=this.unescapeFilePostParams(b);this.queueEvent("upload_progress_handler",[b,a,c])};SWFUpload.prototype.uploadError=function(b,a,c){b=this.unescapeFilePostParams(b);this.queueEvent("upload_error_handler",[b,a,c])};SWFUpload.prototype.uploadSuccess=function(c,b,a){c=this.unescapeFilePostParams(c);this.queueEvent("upload_success_handler",[c,b,a])};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};SWFUpload.prototype.debugMessage=function(a){if(this.settings.debug){var c,b=[];if(typeof a==="object"&&typeof a.name==="string"&&typeof a.message==="string"){for(var d in a){if(a.hasOwnProperty(d)){b.push(d+": "+a[d])}}c=b.join("\n")||"";b=c.split("\n");c="EXCEPTION: "+b.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(c)}else{SWFUpload.Console.writeLine(a)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(b){var d,c;try{d=document.getElementById("SWFUpload_Console");if(!d){c=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(c);d=document.createElement("textarea");d.id="SWFUpload_Console";d.style.fontFamily="monospace";d.setAttribute("wrap","off");d.wrap="off";d.style.overflow="auto";d.style.width="700px";d.style.height="350px";d.style.margin="5px";c.appendChild(d)}d.value+=b+"\n";d.scrollTop=d.scrollHeight-d.clientHeight}catch(a){alert("Exception: "+a.name+" Message: "+a.message)}};(function(f){var d={init:function(b,a){return this.each(function(){var p=f(this);var q=p.clone();var t=f.extend({id:p.attr("id"),swf:"uploadify.swf",uploader:"uploadify.php",auto:true,buttonClass:"",buttonCursor:"hand",buttonImage:null,buttonText:"SELECT FILES",checkExisting:false,debug:false,fileObjName:"Filedata",fileSizeLimit:0,fileTypeDesc:"All Files",fileTypeExts:"*.*",height:30,itemTemplate:false,method:"post",multi:true,formData:{},preventCaching:true,progressData:"percentage",queueID:false,queueSizeLimit:999,removeCompleted:true,removeTimeout:3,requeueErrors:false,successTimeout:30,uploadLimit:0,width:120,overrideEvents:[]},b);var w={assume_success_timeout:t.successTimeout,button_placeholder_id:t.id,button_width:t.width,button_height:t.height,button_text:null,button_text_style:null,button_text_top_padding:0,button_text_left_padding:0,button_action:(t.multi?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE),button_disabled:false,button_cursor:(t.buttonCursor=="arrow"?SWFUpload.CURSOR.ARROW:SWFUpload.CURSOR.HAND),button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,debug:t.debug,requeue_on_error:t.requeueErrors,file_post_name:t.fileObjName,file_size_limit:t.fileSizeLimit,file_types:t.fileTypeExts,file_types_description:t.fileTypeDesc,file_queue_limit:t.queueSizeLimit,file_upload_limit:t.uploadLimit,flash_url:t.swf,prevent_swf_caching:t.preventCaching,post_params:t.formData,upload_url:t.uploader,use_query_string:(t.method=="get"),file_dialog_complete_handler:e.onDialogClose,file_dialog_start_handler:e.onDialogOpen,file_queued_handler:e.onSelect,file_queue_error_handler:e.onSelectError,swfupload_loaded_handler:t.onSWFReady,upload_complete_handler:e.onUploadComplete,upload_error_handler:e.onUploadError,upload_progress_handler:e.onUploadProgress,upload_start_handler:e.onUploadStart,upload_success_handler:e.onUploadSuccess};if(a){w=f.extend(w,a)}w=f.extend(w,t);var c=swfobject.getFlashPlayerVersion();var v=(c.major>=9);if(v){window["uploadify_"+t.id]=new SWFUpload(w);var u=window["uploadify_"+t.id];p.data("uploadify",u);var r=f("<div />",{id:t.id,"class":"uploadify",css:{height:t.height+"px",width:t.width+"px"}});f("#"+u.movieName).wrap(r);r=f("#"+t.id);r.data("uploadify",u);var x=f("<div />",{id:t.id+"-button","class":"uploadify-button "+t.buttonClass});if(t.buttonImage){x.css({"background-image":"url('"+t.buttonImage+"')","text-indent":"-9999px"})}x.html('<span class="uploadify-button-text">'+t.buttonText+"</span>").css({height:t.height+"px","line-height":t.height+"px",width:t.width+"px"});r.append(x);f("#"+u.movieName).css({position:"absolute","z-index":1});if(!t.queueID){var s=f("<div />",{id:t.id+"-queue","class":"uploadify-queue"});r.after(s);u.settings.queueID=t.id+"-queue";u.settings.defaultQueue=true}u.queueData={files:{},filesSelected:0,filesQueued:0,filesReplaced:0,filesCancelled:0,filesErrored:0,uploadsSuccessful:0,uploadsErrored:0,averageSpeed:0,queueLength:0,queueSize:0,uploadSize:0,queueBytesUploaded:0,uploadQueue:[],errorMsg:"Some files were not added to the queue:"};u.original=q;u.wrapper=r;u.button=x;u.queue=s;if(t.onInit){t.onInit.call(p,u)}}else{if(t.onFallback){t.onFallback.call(p)}}})},cancel:function(c,a){var b=arguments;this.each(function(){var o=f(this),r=o.data("uploadify"),q=r.settings,s=-1;if(b[0]){if(b[0]=="*"){var t=r.queueData.queueLength;f("#"+q.queueID).find(".uploadify-queue-item").each(function(){s++;if(b[1]===true){r.cancelUpload(f(this).attr("id"),false)}else{r.cancelUpload(f(this).attr("id"))}f(this).find(".data").removeClass("data").html(" - Cancelled");f(this).find(".uploadify-progress-bar").remove();f(this).delay(1000+100*s).fadeOut(500,function(){f(this).remove()})});r.queueData.queueSize=0;r.queueData.queueLength=0;if(q.onClearQueue){q.onClearQueue.call(o,t)}}else{for(var n=0;n<b.length;n++){r.cancelUpload(b[n]);f("#"+b[n]).find(".data").removeClass("data").html(" - Cancelled");f("#"+b[n]).find(".uploadify-progress-bar").remove();f("#"+b[n]).delay(1000+100*n).fadeOut(500,function(){f(this).remove()})}}}else{var p=f("#"+q.queueID).find(".uploadify-queue-item").get(0);$item=f(p);r.cancelUpload($item.attr("id"));$item.find(".data").removeClass("data").html(" - Cancelled");$item.find(".uploadify-progress-bar").remove();$item.delay(1000).fadeOut(500,function(){f(this).remove()})}})},destroy:function(){this.each(function(){var a=f(this),c=a.data("uploadify"),b=c.settings;c.destroy();if(b.defaultQueue){f("#"+b.queueID).remove()}f("#"+b.id).replaceWith(c.original);if(b.onDestroy){b.onDestroy.call(this)}delete c})},disable:function(a){this.each(function(){var b=f(this),h=b.data("uploadify"),c=h.settings;if(a){h.button.addClass("disabled");if(c.onDisable){c.onDisable.call(this)}}else{h.button.removeClass("disabled");if(c.onEnable){c.onEnable.call(this)}}h.setButtonDisabled(a)})},settings:function(i,b,a){var j=arguments;var c=b;this.each(function(){var h=f(this),n=h.data("uploadify"),m=n.settings;if(typeof(j[0])=="object"){for(var g in b){setData(g,b[g])}}if(j.length===1){c=m[i]}else{switch(i){case"uploader":n.setUploadURL(b);break;case"formData":if(!a){b=f.extend(m.formData,b)}n.setPostParams(m.formData);break;case"method":if(b=="get"){n.setUseQueryString(true)}else{n.setUseQueryString(false)}break;case"fileObjName":n.setFilePostName(b);break;case"fileTypeExts":n.setFileTypes(b,m.fileTypeDesc);break;case"fileTypeDesc":n.setFileTypes(m.fileTypeExts,b);break;case"fileSizeLimit":n.setFileSizeLimit(b);break;case"uploadLimit":n.setFileUploadLimit(b);break;case"queueSizeLimit":n.setFileQueueLimit(b);break;case"buttonImage":n.button.css("background-image",settingValue);break;case"buttonCursor":if(b=="arrow"){n.setButtonCursor(SWFUpload.CURSOR.ARROW)}else{n.setButtonCursor(SWFUpload.CURSOR.HAND)}break;case"buttonText":f("#"+m.id+"-button").find(".uploadify-button-text").html(b);break;case"width":n.setButtonDimensions(b,m.height);break;case"height":n.setButtonDimensions(m.width,b);break;case"multi":if(b){n.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILES)}else{n.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILE)}break}m[i]=b}});if(j.length===1){return c}},stop:function(){this.each(function(){var a=f(this),b=a.data("uploadify");b.queueData.averageSpeed=0;b.queueData.uploadSize=0;b.queueData.bytesUploaded=0;b.queueData.uploadQueue=[];b.stopUpload()})},upload:function(){var a=arguments;this.each(function(){var c=f(this),h=c.data("uploadify");h.queueData.averageSpeed=0;h.queueData.uploadSize=0;h.queueData.bytesUploaded=0;h.queueData.uploadQueue=[];if(a[0]){if(a[0]=="*"){h.queueData.uploadSize=h.queueData.queueSize;h.queueData.uploadQueue.push("*");h.startUpload()}else{for(var b=0;b<a.length;b++){h.queueData.uploadSize+=h.queueData.files[a[b]].size;h.queueData.uploadQueue.push(a[b])}h.startUpload(h.queueData.uploadQueue.shift())}}else{h.startUpload()}})}};var e={onDialogOpen:function(){var a=this.settings;this.queueData.errorMsg="Some files were not added to the queue:";this.queueData.filesReplaced=0;this.queueData.filesCancelled=0;if(a.onDialogOpen){a.onDialogOpen.call(this)}},onDialogClose:function(h,b,a){var c=this.settings;this.queueData.filesErrored=h-b;this.queueData.filesSelected=h;this.queueData.filesQueued=b-this.queueData.filesCancelled;this.queueData.queueLength=a;if(f.inArray("onDialogClose",c.overrideEvents)<0){if(this.queueData.filesErrored>0){alert(this.queueData.errorMsg)}}if(c.onDialogClose){c.onDialogClose.call(this,this.queueData)}if(c.auto){f("#"+c.id).uploadify("upload","*")}},onSelect:function(r){var q=this.settings;var t={};for(var s in this.queueData.files){t=this.queueData.files[s];if(t.uploaded!=true&&t.name==r.name){var u=confirm('The file named "'+r.name+'" is already in the queue.\nDo you want to replace the existing item in the queue?');if(!u){this.cancelUpload(r.id);this.queueData.filesCancelled++;return false}else{f("#"+t.id).remove();this.cancelUpload(t.id);this.queueData.filesReplaced++}}}var p=Math.round(r.size/1024);var a="KB";if(p>1000){p=Math.round(p/1000);a="MB"}var c=p.toString().split(".");p=c[0];if(c.length>1){p+="."+c[1].substr(0,2)}p+=a;var n=r.name;if(n.length>25){n=n.substr(0,25)+"..."}itemData={fileID:r.id,instanceID:q.id,fileName:n,fileSize:p};if(q.itemTemplate==false){q.itemTemplate='<div id="${fileID}" class="uploadify-queue-item">                    <div class="cancel">                        <a href="javascript:$(\'#${instanceID}\').uploadify(\'cancel\', \'${fileID}\')">X</a>                    </div>                    <span class="fileName">${fileName} (${fileSize})</span><span class="data"></span>                    <div class="uploadify-progress">                        <div class="uploadify-progress-bar"><!--Progress Bar--></div>                    </div>                </div>'}if(f.inArray("onSelect",q.overrideEvents)<0){itemHTML=q.itemTemplate;for(var b in itemData){itemHTML=itemHTML.replace(new RegExp("\\$\\{"+b+"\\}","g"),itemData[b])}f("#"+q.queueID).append(itemHTML)}this.queueData.queueSize+=r.size;this.queueData.files[r.id]=r;if(q.onSelect){q.onSelect.apply(this,arguments)}},onSelectError:function(h,a,b){var c=this.settings;if(f.inArray("onSelectError",c.overrideEvents)<0){switch(a){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:if(c.queueSizeLimit>b){this.queueData.errorMsg+="\nThe number of files selected exceeds the remaining upload limit ("+b+")."}else{this.queueData.errorMsg+="\nThe number of files selected exceeds the queue size limit ("+c.queueSizeLimit+")."}break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+h.name+'" exceeds the size limit ('+c.fileSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:this.queueData.errorMsg+='\nThe file "'+h.name+'" is empty.';break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+h.name+'" is not an accepted file type ('+c.fileTypeDesc+").";break}}if(a!=SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED){delete this.queueData.files[h.id]}if(c.onSelectError){c.onSelectError.apply(this,arguments)}},onQueueComplete:function(){if(this.settings.onQueueComplete){this.settings.onQueueComplete.call(this,this.settings.queueData)}},onUploadComplete:function(b){var a=this.settings,c=this;if(this.queueData.uploadQueue[0]=="*"){if(this.queueData.queueLength>0){this.startUpload()}else{this.queueData.uploadQueue=[];if(a.onQueueComplete){a.onQueueComplete.call(this,this.queueData)}}}else{if(this.queueData.uploadQueue.length>0){this.startUpload(this.queueData.uploadQueue.shift())}else{this.queueData.uploadQueue=[];if(a.onQueueComplete){a.onQueueComplete.call(this,this.queueData)}}}if(f.inArray("onUploadComplete",a.overrideEvents)<0){if(a.removeCompleted){switch(b.filestatus){case SWFUpload.FILE_STATUS.COMPLETE:setTimeout(function(){if(f("#"+b.id)){c.queueData.queueSize-=b.size;c.queueData.queueLength-=1;delete c.queueData.files[b.id];f("#"+b.id).fadeOut(500,function(){f(this).remove()})}},a.removeTimeout*1000);break;case SWFUpload.FILE_STATUS.ERROR:if(!a.requeueErrors){setTimeout(function(){if(f("#"+b.id)){c.queueData.queueSize-=b.size;c.queueData.queueLength-=1;delete c.queueData.files[b.id];f("#"+b.id).fadeOut(500,function(){f(this).remove()})}},a.removeTimeout*1000)}break}}else{b.uploaded=true}}if(a.onUploadComplete){a.onUploadComplete.call(this,b)}},onUploadError:function(k,a,b){var j=this.settings;var c="Error";switch(a){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:c="HTTP Error ("+b+")";break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:c="Missing Upload URL";break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:c="IO Error";break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:c="Security Error";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:alert("The upload limit has been reached ("+b+").");c="Exceeds Upload Limit";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:c="Failed";break;case SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND:break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:c="Validation Error";break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:c="Cancelled";this.queueData.queueSize-=k.size;this.queueData.queueLength-=1;if(k.status==SWFUpload.FILE_STATUS.IN_PROGRESS||f.inArray(k.id,this.queueData.uploadQueue)>=0){this.queueData.uploadSize-=k.size}if(j.onCancel){j.onCancel.call(this,k)}delete this.queueData.files[k.id];break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:c="Stopped";break}if(f.inArray("onUploadError",j.overrideEvents)<0){if(a!=SWFUpload.UPLOAD_ERROR.FILE_CANCELLED&&a!=SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED){f("#"+k.id).addClass("uploadify-error")}f("#"+k.id).find(".uploadify-progress-bar").css("width","1px");if(a!=SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND&&k.status!=SWFUpload.FILE_STATUS.COMPLETE){f("#"+k.id).find(".data").html(" - "+c)}}if(j.onUploadError){j.onUploadError.call(this,k,a,b,c)}},onUploadProgress:function(w,q,t){var v=this.settings;var y=new Date();var c=y.getTime();var s=c-this.timer;if(s>500){this.timer=c}var u=q-this.bytesLoaded;this.bytesLoaded=q;var z=this.queueData.queueBytesUploaded+q;var a=Math.round(q/t*100);var b="KB/s";var r=0;var x=(u/1024)/(s/1000);x=Math.floor(x*10)/10;if(this.queueData.averageSpeed>0){this.queueData.averageSpeed=Math.floor((this.queueData.averageSpeed+x)/2)}else{this.queueData.averageSpeed=Math.floor(x)}if(x>1000){r=(x*0.001);this.queueData.averageSpeed=Math.floor(r);b="MB/s"}if(f.inArray("onUploadProgress",v.overrideEvents)<0){if(v.progressData=="percentage"){f("#"+w.id).find(".data").html(" - "+a+"%")}else{if(v.progressData=="speed"&&s>500){f("#"+w.id).find(".data").html(" - "+this.queueData.averageSpeed+b)}}f("#"+w.id).find(".uploadify-progress-bar").css("width",a+"%")}if(v.onUploadProgress){v.onUploadProgress.call(this,w,q,t,z,this.queueData.uploadSize)}},onUploadStart:function(c){var b=this.settings;var a=new Date();this.timer=a.getTime();this.bytesLoaded=0;if(this.queueData.uploadQueue.length==0){this.queueData.uploadSize=c.size}if(b.checkExisting){f.ajax({type:"POST",async:false,url:b.checkExisting,data:{filename:c.name},success:function(i){if(i==1){var j=confirm('A file with the name "'+c.name+'" already exists on the server.\nWould you like to replace the existing file?');if(!j){this.cancelUpload(c.id);f("#"+c.id).remove();if(this.queueData.uploadQueue.length>0&&this.queueData.queueLength>0){if(this.queueData.uploadQueue[0]=="*"){this.startUpload()}else{this.startUpload(this.queueData.uploadQueue.shift())}}}}}})}if(b.onUploadStart){b.onUploadStart.call(this,c)}},onUploadSuccess:function(c,a,i){var b=this.settings;this.queueData.queueBytesUploaded+=c.size;if(f.inArray("onUploadSuccess",b.overrideEvents)<0){f("#"+c.id).find(".data").html(" - Complete")}if(b.onUploadSuccess){b.onUploadSuccess.call(this,c,a,i)}}};f.fn.uploadify=function(a){if(d[a]){return d[a].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof a==="object"||!a){return d.init.apply(this,arguments)}else{f.error("The method "+a+" does not exist in $.uploadify")}}}})($);
(function(b){var a="placeholder" in document.createElement("input");b.fn.placeholder=function(){var c;if(+arguments[0]||typeof arguments[0]==="string"){c={value:arguments[0]}}c=b.extend({},b.fn.placeholder.defaults,c);return this.each(function(){var f=b(this),g=c.value||f.attr("placeholder");if(a&&f.attr("placeholder")){return this}if(g===undefined||g===null){g=""}if(f.data("placeholder")){f.data("placeholder").val(g);f.change();return true}c.css.height=(!c.css.height||c.css.height==0)?c.css.height:f.height();c.css.width=(!c.css.height||c.css.height==0)?c.css.width:f.width();var e=b(c.wrapper).addClass("placeholder-wrapper"),d=b(c.placeholder).addClass("placeholder").css(c.css);f.data("placeholder",d);f.wrap(e).after(d);d.focus(function(){f.focus()});d.bind("paste drop",function(){var h=d.val();d.val("");setTimeout(function(){f.val(d.val());f.change();d.val(h)},0)});f.bind("paste drop change cut mouseup keydown",function(){setTimeout(function(){if(f.val()){d.hide()}else{d.show()}},0)});d.val(g);f.change()})};b.fn.placeholder.defaults={wrapper:'<span style="position:relative; display:inline-block;"></span>',placeholder:'<input tabindex="-1" type="text" />',css:{color:"#bababa","background-color":"transparent",position:"absolute",left:0,top:0,padding:4,border:0}}})(jQuery);
/*!
 * typeahead.js 0.9.0
 * https://github.com/twitter/typeahead
 * Copyright 2013 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(c){var l="0.9.0";var j={isMsie:function(){var m=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return m?parseInt(m[2],10):false},isBlankString:function(m){return !m||/^\s*$/.test(m)},escapeRegExChars:function(m){return m.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(m){return typeof m==="string"},isNumber:function(m){return typeof m==="number"},isArray:c.isArray,isFunction:c.isFunction,isObject:c.isPlainObject,isUndefined:function(m){return typeof m==="undefined"},bind:c.proxy,bindAll:function(n){var o;for(var m in n){c.isFunction(o=n[m])&&(n[m]=c.proxy(o,n))}},indexOf:function(n,o){for(var m=0;m<n.length;m++){if(n[m]===o){return m}}return -1},each:c.each,map:c.map,filter:c.grep,every:function(n,o){var m=true;if(!n){return m}c.each(n,function(p,q){if(!(m=o.call(null,q,p,n))){return false}});return !!m},some:function(n,o){var m=false;if(!n){return m}c.each(n,function(p,q){if(m=o.call(null,q,p,n)){return false}});return !!m},mixin:c.extend,getUniqueId:function(){var m=0;return function(){return m++}}(),defer:function(m){setTimeout(m,0)},debounce:function(o,q,n){var p,m;return function(){var u=this,t=arguments,s,r;s=function(){p=null;if(!n){m=o.apply(u,t)}};r=n&&!p;clearTimeout(p);p=setTimeout(s,q);if(r){m=o.apply(u,t)}return m}},throttle:function(r,t){var p,o,s,m,q,n;q=0;n=function(){q=new Date();s=null;m=r.apply(p,o)};return function(){var u=new Date(),v=t-(u-q);p=this;o=arguments;if(v<=0){clearTimeout(s);s=null;q=u;m=r.apply(p,o)}else{if(!s){s=setTimeout(n,v)}}return m}},tokenizeQuery:function(m){return c.trim(m).toLowerCase().split(/[\s]+/)},tokenizeText:function(m){return c.trim(m).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}};var k=function(){var m=/\s+/;return{on:function(n,p){var o;if(!p){return this}this._callbacks=this._callbacks||{};n=n.split(m);while(o=n.shift()){this._callbacks[o]=this._callbacks[o]||[];this._callbacks[o].push(p)}return this},trigger:function(o,r){var q,p;if(!this._callbacks){return this}o=o.split(m);while(q=o.shift()){if(p=this._callbacks[q]){for(var n=0;n<p.length;n+=1){p[n].call(this,{type:q,data:r})}}}return this}}}();var e=function(){var n="typeahead:";function m(p){if(!p||!p.el){c.error("EventBus initialized without el")}this.$el=c(p.el)}j.mixin(m.prototype,{trigger:function(p){var o=[].slice.call(arguments,1);this.$el.trigger(n+p,o)}});return m}();var g=function(){var m=window.localStorage,n;function p(s){this.prefix=["__",s,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+this.prefix)}if(window.localStorage&&window.JSON){n={_prefix:function(s){return this.prefix+s},_ttlKey:function(s){return this._prefix(s)+this.ttlKey},get:function(s){if(this.isExpired(s)){this.remove(s)}return r(m.getItem(this._prefix(s)))},set:function(t,u,s){if(j.isNumber(s)){m.setItem(this._ttlKey(t),q(o()+s))}else{m.removeItem(this._ttlKey(t))}return m.setItem(this._prefix(t),q(u))},remove:function(s){m.removeItem(this._ttlKey(s));m.removeItem(this._prefix(s));return this},clear:function(){var u,t,v=[],s=m.length;for(u=0;u<s;u++){if((t=m.key(u)).match(this.keyMatcher)){v.push(t.replace(this.keyMatcher,""))}}for(u=v.length;u--;){this.remove(v[u])}return this},isExpired:function(t){var s=r(m.getItem(this._ttlKey(t)));return j.isNumber(s)&&o()>s?true:false}}}else{n={get:j.noop,set:j.noop,remove:j.noop,clear:j.noop,isExpired:j.noop}}j.mixin(p.prototype,n);return p;function o(){return new Date().getTime()}function q(s){return JSON.stringify(j.isUndefined(s)?null:s)}function r(s){return JSON.parse(s)}}();var i=function(){function m(n){j.bindAll(this);n=n||{};this.sizeLimit=n.sizeLimit||10;this.cache={};this.cachedKeysByAge=[]}j.mixin(m.prototype,{get:function(n){return this.cache[n]},set:function(o,p){var n;if(this.cachedKeysByAge.length===this.sizeLimit){n=this.cachedKeysByAge.shift();delete this.cache[n]}this.cache[o]=p;this.cachedKeysByAge.push(o)}});return m}();var d=function(){var o=0,q,r;function s(t){j.bindAll(this);t=j.isString(t)?{url:t}:t;r=r||new i();q=j.isNumber(t.maxParallelRequests)?t.maxParallelRequests:q||6;this.url=t.url;this.wildcard=t.wildcard||"%QUERY";this.filter=t.filter;this.replace=t.replace;this.ajaxSettings={type:"get",cache:t.cache,timeout:t.timeout,dataType:t.dataType||"json",beforeSend:t.beforeSend};this.get=(/^throttle$/i.test(t.rateLimitFn)?j.throttle:j.debounce)(this.get,t.rateLimitWait||300)}j.mixin(s.prototype,{get:function(z,u){var y=this,x=encodeURIComponent(z||""),w,A;w=this.replace?this.replace(this.url,x):this.url.replace(this.wildcard,x);if(A=r.get(w)){u&&u(A)}else{if(n()){m();c.ajax(w,this.ajaxSettings).done(v).always(t)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}}function v(B){B=y.filter?y.filter(B):B;u&&u(B);r.set(w,B)}function t(){p();if(y.onDeckRequestArgs){y.get.apply(y,y.onDeckRequestArgs);y.onDeckRequestArgs=null}}}});return s;function m(){o++}function p(){o--}function n(){return o<q}}();var a=function(){function n(p){j.bindAll(this);if(p.template&&!p.engine){c.error("no template engine specified")}if(!p.local&&!p.prefetch&&!p.remote){c.error("one of local, prefetch, or remote is requried")}this.name=p.name||j.getUniqueId();this.limit=p.limit||5;this.header=p.header;this.footer=p.footer;this.valueKey=p.valueKey||"value";this.template=m(p.template,p.engine,this.valueKey);this.local=p.local;this.prefetch=p.prefetch;this.remote=p.remote;this.keys={version:"version",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};this.itemHash={};this.adjacencyList={};this.storage=p.name?new g(p.name):null}j.mixin(n.prototype,{_processLocalData:function(o){this._mergeProcessedData(this._processData(o))},_loadPrefetchData:function(p){var s=this,x,u,w,r,v,q;if(this.storage){u=this.storage.get(this.keys.version);w=this.storage.get(this.keys.protocol);r=this.storage.get(this.keys.itemHash);v=this.storage.get(this.keys.adjacencyList);q=u!==l||w!==j.getProtocol()}p=j.isString(p)?{url:p}:p;p.ttl=j.isNumber(p.ttl)?p.ttl:24*60*60*1000;if(r&&v&&!q){this._mergeProcessedData({itemHash:r,adjacencyList:v});x=c.Deferred().resolve()}else{x=c.getJSON(p.url).done(t)}return x;function t(B){var A=p.filter?p.filter(B):B,z=s._processData(A),o=z.itemHash,y=z.adjacencyList;if(s.storage){s.storage.set(s.keys.itemHash,o,p.ttl);s.storage.set(s.keys.adjacencyList,y,p.ttl);s.storage.set(s.keys.version,l,p.ttl);s.storage.set(s.keys.protocol,j.getProtocol(),p.ttl)}s._mergeProcessedData(z)}},_transformDatum:function(o){var q=j.isString(o)?o:o[this.valueKey],r=o.tokens||j.tokenizeText(q),p={value:q,tokens:r};if(j.isString(o)){p.datum={};p.datum[this.valueKey]=o}else{p.datum=o}p.tokens=j.filter(p.tokens,function(s){return !j.isBlankString(s)});p.tokens=j.map(p.tokens,function(s){return s.toLowerCase()});return p},_processData:function(r){var q=this,o={},p={};j.each(r,function(t,s){var u=q._transformDatum(s),v=j.getUniqueId(u.value);o[v]=u;j.each(u.tokens,function(x,w){var z=w.charAt(0),y=p[z]||(p[z]=[v]);!~j.indexOf(y,v)&&y.push(v)})});return{itemHash:o,adjacencyList:p}},_mergeProcessedData:function(o){var p=this;j.mixin(this.itemHash,o.itemHash);j.each(o.adjacencyList,function(s,r){var q=p.adjacencyList[s];p.adjacencyList[s]=q?q.concat(r):r})},_getLocalSuggestions:function(t){var s=this,r=[],p=[],q,o=[];j.each(t,function(v,u){var w=u.charAt(0);!~j.indexOf(r,w)&&r.push(w)});j.each(r,function(u,v){var w=s.adjacencyList[v];if(!w){return false}p.push(w);if(!q||w.length<q.length){q=w}});if(p.length<r.length){return[]}j.each(q,function(u,y){var w=s.itemHash[y],x,v;x=j.every(p,function(z){return ~j.indexOf(z,y)});v=x&&j.every(t,function(z){return j.some(w.tokens,function(A){return A.indexOf(z)===0})});v&&o.push(w)});return o},initialize:function(){var o;this.local&&this._processLocalData(this.local);this.transport=this.remote?new d(this.remote):null;o=this.prefetch?this._loadPrefetchData(this.prefetch):c.Deferred().resolve();this.local=this.prefetch=this.remote=null;this.initialize=function(){return o};return o},getSuggestions:function(s,p){var r=this,q=j.tokenizeQuery(s),o=this._getLocalSuggestions(q).slice(0,this.limit);p&&p(o);if(o.length<this.limit&&this.transport){this.transport.get(s,t)}function t(u){o=o.slice(0);j.each(u,function(x,w){var y=r._transformDatum(w),v;v=j.some(o,function(z){return y.value===z.value});!v&&o.push(y);return o.length<r.limit});p&&p(o)}}});return n;function m(q,p,r){var s='<div class="tt-suggestion">%body</div>',o;if(q){o=p.compile(s.replace("%body",q))}else{o={render:function(t){return s.replace("%body","<p>"+t[r]+"</p>")}}}return o}}();var b=function(){function n(q){var p=this;j.bindAll(this);this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};this.$hint=c(q.hint);this.$input=c(q.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent);if(!j.isMsie()){this.$input.on("input.tt",this._compareQueryToInputValue)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(r){if(p.specialKeyCodeMap[r.which||r.keyCode]){return}j.defer(p._compareQueryToInputValue)})}this.query=this.$input.val();this.$overflowHelper=o(this.$input)}j.mixin(n.prototype,k,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(p){var q=this.specialKeyCodeMap[p.which||p.keyCode];q&&this.trigger(q+"Keyed",p)},_compareQueryToInputValue:function(){var p=this.getInputValue(),r=m(this.query,p),q=r?this.query.length!==p.length:false;if(q){this.trigger("whitespaceChanged",{value:this.query})}else{if(!r){this.trigger("queryChanged",{value:this.query=p})}}},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},getInputValue:function(){return this.$input.val()},setInputValue:function(q,p){this.$input.val(q);if(p!==true){this._compareQueryToInputValue()}},getHintValue:function(){return this.$hint.val()},setHintValue:function(p){this.$hint.val(p)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var q=this.$input.val().length,r=this.$input[0].selectionStart,p;if(j.isNumber(r)){return r===q}else{if(document.selection){p=document.selection.createRange();p.moveStart("character",-q);return q===p.text.length}}return true}});return n;function o(p){return c("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:p.css("font-family"),fontSize:p.css("font-size"),fontStyle:p.css("font-style"),fontVariant:p.css("font-variant"),fontWeight:p.css("font-weight"),wordSpacing:p.css("word-spacing"),letterSpacing:p.css("letter-spacing"),textIndent:p.css("text-indent"),textRendering:p.css("text-rendering"),textTransform:p.css("text-transform")}).insertAfter(p)}function m(q,p){q=(q||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ");p=(p||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ");return q===p}}();var f=function(){var o={suggestionsList:'<span class="tt-suggestions"></span>'},n={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"}};function p(q){j.bindAll(this);this.isOpen=false;this.isEmpty=true;this.isMouseOverDropdown=false;this.$menu=c(q.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}j.mixin(p.prototype,k,{_handleMouseenter:function(){this.isMouseOverDropdown=true},_handleMouseleave:function(){this.isMouseOverDropdown=false},_handleMouseover:function(r){var q=c(r.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor");q.addClass("tt-is-under-cursor")},_handleSelection:function(r){var q=c(r.currentTarget);this.trigger("suggestionSelected",m(q))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(s){var u,r,q,t;if(!this.isVisible()){return}u=this._getSuggestions();r=u.filter(".tt-is-under-cursor");r.removeClass("tt-is-under-cursor");q=u.index(r)+s;q=(q+1)%(u.length+1)-1;if(q===-1){this.trigger("cursorRemoved");return}else{if(q<-1){q=u.length-1}}t=u.eq(q).addClass("tt-is-under-cursor");this.trigger("cursorMoved",m(t))},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},destroy:function(){this.$menu.off(".tt");this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){if(!this.isMouseOverDropdown){this.close()}},close:function(){if(this.isOpen){this.isOpen=false;this._hide();this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor");this.trigger("closed")}},open:function(){if(!this.isOpen){this.isOpen=true;!this.isEmpty&&this._show();this.trigger("opened")}},setLanguageDirection:function(q){var r={left:"0",right:"auto"},s={left:"auto",right:" 0"};q==="ltr"?this.$menu.css(r):this.$menu.css(s)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(+1)},getSuggestionUnderCursor:function(){var q=this._getSuggestions().filter(".tt-is-under-cursor").first();return q.length>0?m(q):null},getFirstSuggestion:function(){var q=this._getSuggestions().first();return q.length>0?m(q):null},renderSuggestions:function(w,r){var q="tt-dataset-"+w.name,s,v=this.$menu.find("."+q),x,t,u;if(v.length===0){s=c(o.suggestionsList).css(n.suggestionsList);v=c("<div></div>").addClass(q).append(w.header).append(s).append(w.footer).appendTo(this.$menu)}if(r.length>0){this.isEmpty=false;this.isOpen&&this._show();x=document.createElement("div");t=document.createDocumentFragment();j.each(r,function(z,y){x.innerHTML=w.template.render(y.datum);u=c(x.firstChild).css(n.suggestion).data("suggestion",y);u.children().each(function(){c(this).css(n.suggestionChild)});t.appendChild(u[0])});v.show().find(".tt-suggestions").html(t)}else{this.clearSuggestions(w.name)}this.trigger("suggestionsRendered")},clearSuggestions:function(s){var q=s?this.$menu.find(".tt-dataset-"+s):this.$menu.find('[class^="tt-dataset-"]'),r=q.find(".tt-suggestions");q.hide();r.empty();if(this._getSuggestions().length===0){this.isEmpty=true;this._hide()}}});return p;function m(q){return q.data("suggestion")}}();var h=function(){var q={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},p={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};if(j.isMsie()){j.mixin(p.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}if(j.isMsie()&&j.isMsie()<=7){j.mixin(p.wrapper,{display:"inline",zoom:"1"});j.mixin(p.query,{marginTop:"-1px"})}function n(t){var s,u,r;j.bindAll(this);this.$node=m(t.input);this.datasets=t.datasets;this.dir=null;this.eventBus=t.eventBus;s=this.$node.find(".tt-dropdown-menu");u=this.$node.find(".tt-query");r=this.$node.find(".tt-hint");this.dropdownView=new f({menu:s}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent);this.inputView=new b({input:u,hint:r}).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}j.mixin(n.prototype,k,{_managePreventDefault:function(u){var t=u.data,v,r,s=false;switch(u.type){case"tabKeyed":v=this.inputView.getHintValue();r=this.inputView.getInputValue();s=v&&v!==r;break;case"upKeyed":case"downKeyed":s=!t.shiftKey&&!t.ctrlKey&&!t.metaKey;break}s&&t.preventDefault()},_setLanguageDirection:function(){var r=this.inputView.getLanguageDirection();if(r!==this.dir){this.dir=r;this.$node.css("direction",r);this.dropdownView.setLanguageDirection(r)}},_updateHint:function(){var u=this.dropdownView.getFirstSuggestion(),t=u?u.value:null,x=this.dropdownView.isVisible(),w=this.inputView.isOverflow(),s,y,z,r,v;if(t&&x&&!w){s=this.inputView.getInputValue();y=s.replace(/\s{2,}/g," ").replace(/^\s+/g,"");z=j.escapeRegExChars(y);r=new RegExp("^(?:"+z+")(.*$)","i");v=r.exec(t);this.inputView.setHintValue(s+(v?v[1]:""))}},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(s){var r=s.data;this.inputView.setInputValue(r.value,true)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(r){this.dropdownView[r.type==="blured"?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(s){var r=s.data;if(!r.shiftKey&&!r.ctrlKey&&!r.metaKey){this.dropdownView[s.type==="upKeyed"?"moveCursorUp":"moveCursorDown"]()}},_handleSelection:function(t){var s=t.type==="suggestionSelected",r=s?t.data:this.dropdownView.getSuggestionUnderCursor();if(r){this.inputView.setInputValue(r.value);s?this.inputView.focus():t.data.preventDefault();s&&j.isMsie()?j.defer(this.dropdownView.close):this.dropdownView.close();this.eventBus.trigger("selected",r.datum)}},_getSuggestions:function(){var r=this,s=this.inputView.getQuery();if(j.isBlankString(s)){return}j.each(this.datasets,function(t,u){u.getSuggestions(s,function(v){if(s===r.inputView.getQuery()){r.dropdownView.renderSuggestions(u,v)}})})},_autocomplete:function(v){var s,r,u,w,t;if(v.type==="rightKeyed"||v.type==="leftKeyed"){s=this.inputView.isCursorAtEnd();r=this.inputView.getLanguageDirection()==="ltr"?v.type==="leftKeyed":v.type==="rightKeyed";if(!s||r){return}}u=this.inputView.getQuery();w=this.inputView.getHintValue();if(w!==""&&u!==w){t=this.dropdownView.getFirstSuggestion();this.inputView.setInputValue(t.value)}},_propagateEvent:function(r){this.eventBus.trigger(r.type)},destroy:function(){this.inputView.destroy();this.dropdownView.destroy();o(this.$node);this.$node=null}});return n;function m(r){var t=c(q.wrapper),v=c(q.dropdown),w=c(r),s=c(q.hint);t=t.css(p.wrapper);v=v.css(p.dropdown);s.css(p.hint).css({backgroundAttachment:w.css("background-attachment"),backgroundClip:w.css("background-clip"),backgroundColor:w.css("background-color"),backgroundImage:w.css("background-image"),backgroundOrigin:w.css("background-origin"),backgroundPosition:w.css("background-position"),backgroundRepeat:w.css("background-repeat"),backgroundSize:w.css("background-size")});w.data("ttAttrs",{dir:w.attr("dir"),autocomplete:w.attr("autocomplete"),spellcheck:w.attr("spellcheck"),style:w.attr("style")});w.addClass("tt-query").attr({autocomplete:"off",spellcheck:false}).css(p.query);try{!w.attr("dir")&&w.attr("dir","auto")}catch(u){}return w.wrap(t).parent().prepend(s).append(v)}function o(r){var s=r.find(".tt-query");j.each(s.data("ttAttrs"),function(t,u){j.isUndefined(u)?s.removeAttr(t):s.attr(t,u)});s.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(r);r.remove()}}();(function(){var n={},o="ttView",m;m={initialize:function(r){var q;r=j.isArray(r)?r:[r];if(this.length===0){c.error("typeahead initialized without DOM element")}if(r.length===0){c.error("no datasets provided")}q=j.map(r,function(t){var s=n[t.name]?n[t.name]:new a(t);if(t.name){n[t.name]=s}return s});return this.each(p);function p(){var u=c(this),t,s=new e({el:u});t=j.map(q,function(v){return v.initialize()});u.data(o,new h({input:u,eventBus:s=new e({el:u}),datasets:q}));c.when.apply(c,t).always(function(){j.defer(function(){s.trigger("initialized")})})}},destroy:function(){this.each(function(){var q=c(this),p=q.data(o);if(p){p.destroy();q.removeData(o)}})}};jQuery.fn.typeahead=function(p){if(m[p]){return m[p].apply(this,[].slice.call(arguments,1))}else{return m.initialize.apply(this,arguments)}}})()})(window.jQuery);
(function(a){a(function(){a(".add-contact-button").ajaxModal("#contacts-ajax-modal",function(){var d=a(this.$modal),c=function(e){var f=a(this);e.preventDefault();d.modal("loading");a.ajax({url:f.attr("action"),dataType:"json",data:f.serialize(),method:"post",success:function(g){if("success"===g.status&&undefined!==g.id){a.getJSON(Routing.generate("_clients_contact_card",{id:g.id}),function(i){var h=a(i.content).hide();a("#client-contacts-list").append(h);h.fadeIn(function(){a(".edit-contact",this).ajaxModal("#contacts-ajax-modal",b)})})}d.modal("loading");setTimeout(function(){d.html(g.content);a("form",d).on("submit",c)},350)}})};a("form",d).on("submit",c)});var b=function(){var d=a(this.$modal),c=this,e=function(f){var g=a(this);f.preventDefault();d.modal("loading");a.ajax({url:g.attr("action"),dataType:"json",data:g.serialize(),method:"post",success:function(h){var i=c.$trigger.parents(".contact-card");if("success"===h.status){a.getJSON(Routing.generate("_clients_contact_card",{id:i.data("id")}),function(k){var j=a(k.content).hide();i.replaceWith(j);j.fadeIn(function(){a(".edit-contact",this).ajaxModal("#contacts-ajax-modal",b)})})}d.modal("loading");setTimeout(function(){d.html(h.content);a("form",d).on("submit",e)},350)}})};a("form",d).on("submit",e)};a(".edit-contact").ajaxModal("#contacts-ajax-modal",b);a("body").on("click",".delete-contact",function(d){d.preventDefault();var c=a(this).parents(".contact-card"),e=c.data("id");bootbox.confirm('<i class="icon-exclamation-sign icon-2x"></i> Are you sure you want to delete this contact?',function(f){if(true===f){setTimeout(function(){a("body").modalmanager("loading")},300);a.post(Routing.generate("_clients_delete_contact",{id:e}),function(){a("body").modalmanager("loading");var g=a('<div class="alert alert-success clearfix">Contact removed successfully!</div>');c.replaceWith(g);setTimeout(function(){g.fadeOut("slow",function(){a(this).remove()})},3000)})}})});a("#delete-client").on("click",function(c){c.preventDefault();var d=a(this);bootbox.confirm("Are you sure you want to delete this client?",function(e){if(true===e){a("body").modalmanager("loading");a.ajax({url:d.attr("href"),dataType:"json",method:"post"}).done(function(){window.document.location=Routing.generate("_clients_index")})}})})})})(window.jQuery);
$(function(){$("body").tooltip({selector:"[rel=tooltip]"});$("select.chosen").chosen();$("input[placeholder]").placeholder();$(document.body).on("click",".btn-add",function(f){f.preventDefault();console.log($(this).data("target"));var c=$(this).siblings("."+$(this).data("target")),b=c.data("prototype"),e,d,a;if(c.data("prototype-name")){a=c.data("prototype-name")}else{a="__name__"}e=new RegExp(a,"g");d=b.replace(e,c.children().length);c.append(d);return false});$(document.body).on("click",".btn-remove",function(c){c.preventDefault();var a=$(this).attr("data-related"),b=$(this).closest('div[data-content^="'+a+'"]');b.remove();return false})});
(function(){var R=!1,Q=this;function P(j,m){var f=j.split("."),l=Q;!(f[0] in l)&&l.execScript&&l.execScript("var "+f[0]);for(var k;f.length&&(k=f.shift());){!f.length&&void 0!==m?l[k]=m:l=l[k]?l[k]:l[k]={}}}var O=Array.prototype,N=O.forEach?function(j,k,f){O.forEach.call(j,k,f)}:function(j,p,f){for(var m=j.length,l="string"==typeof j?j.split(""):j,k=0;k<m;k++){k in l&&p.call(f,l[k],k,j)}};function M(j,p){this.c={};this.a=[];var f=arguments.length;if(1<f){if(f%2){throw Error("Uneven number of arguments")}for(var m=0;m<f;m+=2){this.set(arguments[m],arguments[m+1])}}else{if(j){var l;if(j instanceof M){L(j);m=j.a.concat();L(j);l=[];for(f=0;f<j.a.length;f++){l.push(j.c[j.a[f]])}}else{var f=[],k=0;for(m in j){f[k++]=m}m=f;f=[];k=0;for(l in j){f[k++]=j[l]}l=f}for(f=0;f<m.length;f++){this.set(m[f],l[f])}}}}M.prototype.e=0;M.prototype.o=0;function L(j){if(j.e!=j.a.length){for(var m=0,f=0;m<j.a.length;){var l=j.a[m];y(j.c,l)&&(j.a[f++]=l);m++}j.a.length=f}if(j.e!=j.a.length){for(var k={},f=m=0;m<j.a.length;){l=j.a[m],y(k,l)||(j.a[f++]=l,k[l]=1),m++}j.a.length=f}}M.prototype.get=function(f,j){return y(this.c,f)?this.c[f]:j};M.prototype.set=function(f,j){y(this.c,f)||(this.e++,this.a.push(f),this.o++);this.c[f]=j};function y(f,j){return Object.prototype.hasOwnProperty.call(f,j)}var r,n,h,g;function d(){return Q.navigator?Q.navigator.userAgent:null}g=h=n=r=R;var G;if(G=d()){var A=Q.navigator;r=0==G.indexOf("Opera");n=!r&&-1!=G.indexOf("MSIE");h=!r&&-1!=G.indexOf("WebKit");g=!r&&!h&&"Gecko"==A.product}var z=n,o=g,i=h;var e;if(r&&Q.opera){var c=Q.opera.version;"function"==typeof c&&c()}else{o?e=/rv\:([^\);]+)(\)|;)/:z?e=/MSIE\s+([^\);]+)(\)|;)/:i&&(e=/WebKit\/(\S+)/),e&&e.exec(d())}function b(f,j){this.b=f||{d:"",prefix:"",host:"",scheme:""};this.h(j||{})}b.f=function(){return b.j?b.j:b.j=new b};b.prototype.h=function(f){this.g=new M(f)};b.prototype.k=function(f){this.b.d=f};b.prototype.n=function(){return this.b.d};b.prototype.l=function(f){this.b.prefix=f};function a(j,p,f,m){var l,k=RegExp(/\[\]$/);if(f instanceof Array){N(f,function(q,s){k.test(p)?m(p,q):a(j,p+"["+("object"===typeof q?s:"")+"]",q,m)})}else{if("object"===typeof f){for(l in f){a(j,p+"["+l+"]",f[l],m)}}else{m(p,f)}}}b.prototype.i=function(f){var j=this.b.prefix+f;if(y(this.g.c,j)){f=j}else{if(!y(this.g.c,f)){throw Error('The route "'+f+'" does not exist.')}}return this.g.get(f)};b.prototype.m=function(w,t,v){var q=this.i(w),p=t||{},m={},u;for(u in p){m[u]=p[u]}var l="",f=!0,k="";N(q.tokens,function(B){if("text"===B[0]){l=B[1]+l,f=R}else{if("variable"===B[0]){var D=B[3] in q.defaults;if(R===f||!D||B[3] in p&&p[B[3]]!=q.defaults[B[3]]){if(B[3] in p){var D=p[B[3]],C=B[3];C in m&&delete m[C]}else{if(D){D=q.defaults[B[3]]}else{if(f){return}throw Error('The route "'+w+'" requires the parameter "'+B[3]+'".')}}if(!(!0===D||R===D||""===D)||!f){C=encodeURIComponent(D).replace(/%2F/g,"/"),"null"===C&&null===D&&(C=""),l=B[1]+C+l}f=R}else{D&&(B=B[3],B in m&&delete m[B])}}else{throw Error('The token type "'+B[0]+'" is not supported.')}}});""===l&&(l="/");N(q.hosttokens,function(C){var B;if("text"===C[0]){k=C[1]+k}else{if("variable"===C[0]){if(C[3] in p){B=p[C[3]];var D=C[3];D in m&&delete m[D]}else{C[3] in q.defaults&&(B=q.defaults[C[3]])}k=C[1]+B+k}}});l=this.b.d+l;"_scheme" in q.requirements&&this.b.scheme!=q.requirements._scheme?l=q.requirements._scheme+"://"+(k||this.b.host)+l:k&&this.b.host!==k?l=this.b.scheme+"://"+k+l:!0===v&&(l=this.b.scheme+"://"+this.b.host+l);var t=0,s;for(s in m){t++}if(0<t){var j,x=[];s=function(C,B){B="function"===typeof B?B():B;x.push(encodeURIComponent(C)+"="+encodeURIComponent(null===B?"":B))};for(j in m){a(this,j,m[j],s)}l=l+"?"+x.join("&").replace(/%20/g,"+")}return l};P("fos.Router",b);P("fos.Router.setData",function(f){var j=b.f();j.k(f.base_url);j.h(f.routes);"prefix" in f&&j.l(f.prefix);j.b.host=f.host;j.b.scheme=f.scheme});b.getInstance=b.f;b.prototype.setRoutes=b.prototype.h;b.prototype.setBaseUrl=b.prototype.k;b.prototype.getBaseUrl=b.prototype.n;b.prototype.generate=b.prototype.m;b.prototype.setPrefix=b.prototype.l;b.prototype.getRoute=b.prototype.i;window.Routing=b.f()})();